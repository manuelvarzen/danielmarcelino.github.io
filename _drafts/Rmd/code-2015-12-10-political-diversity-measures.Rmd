#---
#layout: post
#title: "Political Diversity Measures"
#date: 2015-12-10
#category: how-to
#tags: [R]
# comments: true
#image: GoogleNgram.png
#---


<!--more-->

![](/images/blog/2015/GoogleNgram.png)

<hr/>
d <- data.frame(
  state = rep(c('NY', 'CA'), 10),
  year = rep(1:10, 2),
  response= rnorm(20)
)

library(plyr)
# Break up d by state, then fit the specified model to each piece and
# return a list
models <- dlply(d, "state", function(df) 
  lm(response ~ year, data = df))

# Apply coef to each model and return a data frame
ldply(models, coef)

# Print the summary of each model
l_ply(models, summary, .print = TRUE)


# The famous Swiss case 
For many years an official Swiss publication explained the working of the D'Hondt system by means of an illustration which sought to show that if in an election with a total of 60,000 votes and ten members to be elected electors had voted for five parties on the pattern:

```{r 'Swiss'}
Party A 36,000
Party B 12,000
Party C 6,000
Party D 5,000
Party E 1,000

results <- c(A=36000, B=12000, C=6000,
D=5000, E=1000)
```
The, the seat allocation would be:

```{r 'Swiss2'}
Party A 6
Party B 2
Party C 1
Party D 1
Party E 0
```

The illustration was wrong in fact. The application of the D'Hondt system would result in an allocation of seats as indicated:


```{r 'Swiss2'}
results <- c(A=36000, B=12000, C=6000, D=5000, E=1000)

dHondt(parties=names(results), votes=results, seats=10)
```


doit <- function(x) {(x - min(x, na.rm=TRUE))/(max(x,na.rm=TRUE) -
min(x, na.rm=TRUE))}

# use lapply to apply doit() to every column in a data frame
# mtcars is built into R
normed <- as.data.frame(lapply(mtcars, doit))
# very that the range of all is [0, 1]
lapply(normed, range)

#Example Data
x = sample(-100:100,50)

#Normalized Data
normalized = (x-min(x))/(max(x)-min(x))

#Histogram of example data and normalized data
par(mfrow=c(1,2))
hist(x,xlab="Data",col="lightblue",main="")
hist(normalized,xlab="Normalized Data",col="lightblue",main="")


## show normalized data
image(r, main="Raw Data")
image(r_n1, main="Centered")
image(r_n2, main="Z-Score Normalization")
