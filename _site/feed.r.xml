<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
  	<title>Daniel</title>
		<description>Posts categorized as 'r'</description>
		<link></link>
		<atom:link href="/feed.r.xml" rel="self" type="application/rss+xml" />
    
      <item>
        <title>Retrieving Data from Google Books with `ngramr`</title>
        <description>&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Karl_Marx&quot;&gt;Karl Marx&lt;/a&gt; is the most famous founding fathers of modern sociology with a popularity peak in 1975-6, but declining ever since.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/img/code-2015-11-15-retrieving-data-from-google-books-with-ngramr/GoogleNgram.png&quot; alt=&quot;center&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Google has a tool for tracking the frequency of words or phrases across its vast collection of scanned texts, the Google Books. The &lt;a href=&quot;https://books.google.com/ngrams&quot;&gt;Google Ngram Viewer&lt;/a&gt; reports data and graphs the frequency of words encountered in one or across several &lt;em&gt;corpus&lt;/em&gt; over time. For instance, the chart above campares the appearance in the English corpus of following bigrams names: “Karl Marx”, “Max Weber”, “Emile Durkheim”. &lt;/p&gt;

&lt;p&gt;The y-axis shows of all the bigrams contained in the sample of books written in English, what percentage of them are “Karl Marx” or “Max Weber” or “Emile Durkheim”? From the chart above, we can conclude that Marx is the most famous sociologist among the others founding fathers, with a peak in popularity about 1975-6, but his influence has been declining ever since. These thinkers are considered the founding fathers of sociology because they set out to develop practical and scientifically sound methods of research to examine theories of the social world rooted in a specific historical and cultural context. &lt;/p&gt;

&lt;h2 id=&quot;using-r-with-google-ngram-viewer&quot;&gt;Using R with Google Ngram Viewer&lt;/h2&gt;

&lt;p&gt;There is a package to query the Google Ngram called &lt;a href=&quot;https://cran.r-project.org/web/packages/ngramr/index.html&quot;&gt;ngramr&lt;/a&gt; written by Sean Carmody. With this package, one can retrieve data from Ngram pages in the form of data frame.  &lt;/p&gt;

&lt;h2 id=&quot;getting-started&quot;&gt;Getting Started&lt;/h2&gt;
&lt;p&gt;The first thing to do is to load the &lt;code&gt;ggplot2&lt;/code&gt; and &lt;code&gt;ngramr&lt;/code&gt; packages. In case you don’t have them installed, an installation is required.&lt;/p&gt;

&lt;h2 id=&quot;write-a-query-and-do-the-plots&quot;&gt;Write a Query and Do the Plots&lt;/h2&gt;

&lt;p&gt;The following is equivalent to the chart above for the three sociologists bigrams, except that I’m applying a smoothed line–or moving average of 5 years, so trends become more apparent. For instance, the data shown for 2000 is an average of the raw count for 2000 plus 5 values on either side: (“count for 1995” + “count for 2000” + “count for 2005”), divided by 3. So a smoothing of 5 means that 11 values will be averaged: 5 on either side, plus the target value in the center of them.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;ng &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;(Karl Marx)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;(Max Weber)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;(Emile Durkheim)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
ggram&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ng&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; year_start &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1800&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      year_end &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2012&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  
      smoothing &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      google_theme &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  ggtitle&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Marx, Weber, Durkheim&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    theme_538&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;legend.position &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;bottom&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/img/code-2015-11-15-retrieving-data-from-google-books-with-ngramr/sociologists-1.png&quot; alt=&quot;center&quot; /&gt; &lt;/p&gt;

&lt;h2 id=&quot;complex-queries&quot;&gt;Complex Queries&lt;/h2&gt;

&lt;p&gt;I test the trend in popularity of the unigran “Capitalism” vis-à-vis other two unigrans (“Socialism”, “Communism”) from 1850 to 2012. Here’s how we might combine + and / to show how the unigram “Capitalism” has blossomed at the expense of “Socialism” and “Communism” terms in the literature published in English.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;ng &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Capitalism /(Capitalism + Socialism + Communism)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
cap &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; ggram&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ng&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; year_start &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1850&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      year_end &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2012&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  
      smoothing &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      google_theme &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  ggtitle&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Capitalism over (Capitalism + Socialism + Communism)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    theme_538&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

ng &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Socialism /(Capitalism + Socialism + Communism)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
soc &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; ggram&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ng&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; year_start &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1850&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      year_end &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2012&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  
      smoothing &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      google_theme &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  ggtitle&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Socialism over (Capitalism + Socialism + Communism)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    theme_538&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

ng &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Communism /(Capitalism + Socialism + Communism)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
com &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; ggram&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ng&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; year_start &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1850&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      year_end &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2012&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  
      smoothing &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      google_theme &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  ggtitle&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Communism over (Capitalism + Socialism + Communism)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    theme_538&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
multiplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;cap&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; soc&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; com&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; ncols&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
ggfootnote&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/img/code-2015-11-15-retrieving-data-from-google-books-with-ngramr/Capitalism Popularity-1.png&quot; alt=&quot;center&quot; /&gt; &lt;/p&gt;

&lt;p&gt;In the following, I retrieve the frequency for the unigram “Capitalism” in the Russian &lt;em&gt;corpus&lt;/em&gt;, French, and British English. Note that the results can be case-insensitive variants.&lt;/p&gt;

&lt;p&gt;Below is a plot of the unigram “Capitalism” (“капитализм”) in the Russian language &lt;em&gt;corpus&lt;/em&gt;.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;ng &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;капитализм&amp;quot;&lt;/span&gt;
rus&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;ggram&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ng&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; year_start &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1850&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      corpus &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;rus_2012&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      ignore_case &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      google_theme &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    ggtitle&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Russian: капитализм&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
     theme_538&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

ng &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;capitalisme&amp;quot;&lt;/span&gt;
fre&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;ggram&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ng&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; year_start &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1850&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      corpus &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;fre_2012&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      ignore_case &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      google_theme &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    ggtitle&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;French: Capitalisme&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
     theme_538&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

ng &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;capitalism&amp;quot;&lt;/span&gt;
eng&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;ggram&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ng&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; year_start &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1850&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      corpus &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;eng_gb_2012&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      ignore_case &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      google_theme &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    ggtitle&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;English: Capitalism&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
     theme_538&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

multiplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rus&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; fre&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; eng&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; ncols&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
ggfootnote&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/img/code-2015-11-15-retrieving-data-from-google-books-with-ngramr/capitalism-1.png&quot; alt=&quot;center&quot; /&gt; &lt;/p&gt;

</description>
        <pubDate>Sun, 15 Nov 2015 00:00:00 -0200</pubDate>
        <link>/blog/r/2015/11/15/retrieving-data-from-google-books-with-ngramr.html</link>
        <guid isPermaLink="true">/blog/r/2015/11/15/retrieving-data-from-google-books-with-ngramr.html</guid>
      </item>
    
      <item>
        <title>House Effects in Argentinian polling</title>
        <description>&lt;p&gt;I’ve already posted on ‘house effects’, the tendency of polling organizations to systematically vary in their results from one another&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/img/2015/3d-house-effects_argentine.png&quot; alt=&quot;House Effects&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I’ve already &lt;a href=&quot;http://danielmarcelino.com/r/08-2015/Argentine-general-election-2015/&quot;&gt;posted&lt;/a&gt; on “house effects”, the tendency of polling organizations to systematically vary in their results from one another. In this post, I look specifically at these house effects, and show which polling organizations over or under-estimate support for each candidate–compared to the average–in this presidential election in Argentina.&lt;/p&gt;

&lt;p&gt;The graph above plots the house effects for the main presidential candidates considering more than 115 polls that I’ve collected since 2014.&lt;/p&gt;

&lt;p&gt;In essence, the house effects measure how far polls by a pollster are from what would be expected based on trends over time for the average polling house. In other words, the average house effect toward each candidate/party is expected to be zero by design. Then, a poll that is systematically 2% below what would be predicted for the date the poll was conducted will have a house effect of -2.0%.&lt;/p&gt;

&lt;p&gt;The dots in “red” in the plot represent the pollster whose house effects were negative toward Mauricio Macri, while dots in “blue” represent positive effects toward him. &lt;/p&gt;

&lt;p&gt;The electoral result tonight was a bit of surprise as several pollsters didn’t seem to have pick out a crescendo preference for the opposition candidate, Mauricio Macri, among undecided voters over the last week. &lt;a href=&quot;http://us3.campaign-archive1.com/?u=6b1e9fcb4df3eaee1cd635f50&amp;amp;id=0e702eecac&amp;amp;e=c2780c4e4b&quot;&gt;This blog&lt;/a&gt; has more details. &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kn&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;scatterplot3d&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
houseEffects&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;pcolor&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;houseEffects&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Macri&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;
houseEffects&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;pcolor&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;houseEffects&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;Macri&lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;

&lt;span class=&quot;kp&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;houseEffects&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  s3d &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; scatterplot3d&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Scioli&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Massa&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Macri&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# x y and z axis&lt;/span&gt;
                       angle&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# angle of the plot &lt;/span&gt;
                       color&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;pcolor&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; pch&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# filled blue circles&lt;/span&gt;
                       type&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;h&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# vertical lines to the x-y plane&lt;/span&gt;
                       main&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;House Effects&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                       xlab&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Daniel Scioli&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                       ylab&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Sergio Massa&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                       zlab&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Mauricio Macri&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  s3d.coords &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; s3d&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;xyz.convert&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Scioli&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Massa&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Macri&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# convert 3D coords to 2D projection&lt;/span&gt;
  text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;s3d.coords&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;x&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; s3d.coords&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;y&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# x and y coordinates&lt;/span&gt;
       labels&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Pollster&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# text to plot&lt;/span&gt;
       cex&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; pos&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# shrink text 50% and place to right of points)&lt;/span&gt;
  legend&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;topleft&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; inset&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# location and inset&lt;/span&gt;
         bty&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;n&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; cex&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# suppress legend box, shrink text 70%&lt;/span&gt;
         title&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;House effects toward\nDaniel Scioli&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;-&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;+&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</description>
        <pubDate>Sun, 25 Oct 2015 00:00:00 -0200</pubDate>
        <link>/blog/r/2015/10/25/argentine-house-effects.html</link>
        <guid isPermaLink="true">/blog/r/2015/10/25/argentine-house-effects.html</guid>
      </item>
    
      <item>
        <title>Argentina&#39;s 2015 Presidential Election Forecasts</title>
        <description>&lt;p&gt;The model indicates the official candidate have chance of making it right way this Sunday, but the odds are short.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;predictions&quot;&gt;Predictions&lt;/h3&gt;
&lt;p&gt;The model I’m using indicates the official candidate have some chance of making it right way this Sunday, avoiding a runoff with Mauricio Macri in late November. The electoral preference distributions are quite apart from each other, with the distribution of Daniel Scioli about 40% of the positive vote, while Macri’s about 30%. &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/2015/probs_argentine.png&quot; alt=&quot;Preference Distributions&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The model built on more than 115 polls by 24 pollsters suggests he has 86% of probability of finishing above 40% of the positive votes. To avoid a runoff, he must obtain more than 45% of the valid votes, or more than 40% with a difference greater than 10% from the second candidate. The typical  difference the model predicts is about 12%; not too loose, but a double digit difference.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/2015/FPV_PRO_differences.png&quot; alt=&quot;Simulated differences&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://danielmarcelino.com/r/08-2015/Argentine-general-election-2015/&quot;&gt;The models I posted for the primaries&lt;/a&gt;, predicted quite well the proportion of votes each major candidate eventually received. If fact, the model with a Dirichlet trendline did appreciate slightly the frontrunner candidate while the simple loess model just made it to the point. &lt;/p&gt;

&lt;h3 id=&quot;when-did-the-presidential-election-approach-its-tipping-point&quot;&gt;When did the presidential election approach its tipping point?&lt;/h3&gt;

&lt;p&gt;The first poll I’ve in my database dates back to March 2014. From this period, the only significant movement in the preference distribution happened before the primaries, in August, and this was true for both Scioli and Macri. Though for Macri, the upward movement was imperceptible. Because nothing change since then, it’s hard to say the candidate gained momentum,as his numbers have neither risen nor fallen ever since.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/2015/Kalman_Argentine_21_oct.png&quot; alt=&quot;Full Filter&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;the-model&quot;&gt;The model&lt;/h3&gt;
&lt;p&gt;The polls were modeled using a Kalman Filter, then the probabilities were computed using a Dirichlet Multinomial Distribution. Details on the model can be found within &lt;a href=&quot;https://gist.github.com/danielmarcelino&quot;&gt;my gists&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Wed, 21 Oct 2015 00:00:00 -0200</pubDate>
        <link>/blog/r/2015/10/21/argentine-presidential-election-predictions.html</link>
        <guid isPermaLink="true">/blog/r/2015/10/21/argentine-presidential-election-predictions.html</guid>
      </item>
    
      <item>
        <title>Paranormal Distribution</title>
        <description>&lt;p&gt;What if, instead of a normal, you got a paranormal distribution?&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;What if, instead of a normal, you got a paranormal distribution?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/paranormal.png&quot; alt=&quot;Paranormal Distribution&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In case you want to read an influential paper on this matter, you can find it &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2465539/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;h4 id=&quot;load-packages-and-set-up-the-theme&quot;&gt;Load packages and set up the theme&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kn&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;gridExtra&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

theme_old &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; theme&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;panel.grid.minor &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_blank&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
                   panel.grid.major &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_blank&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
                   panel.background &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_blank&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
                   plot.background &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_rect&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;#F9F0Ea&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                   panel.border &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  element_blank&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
                   axis.line &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_blank&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
                   axis.text.x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_blank&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
                   axis.text.y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;colour&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                   &lt;span class=&quot;c1&quot;&gt;# axis.text.y = element_blank(),&lt;/span&gt;
                   axis.ticks &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_blank&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
                   axis.title.x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_blank&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
                   axis.title.y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_blank&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# I&amp;#39;m using xkcd fonts, replace or install if you don&amp;#39;t have it.&lt;/span&gt;
                   text &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; family&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;xkcd&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                   axis.line &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_line&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;colour &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;black&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; linetype &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;solid&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                   axis.line.y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_blank&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
                   plot.title &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; element_text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#### Make a &amp;quot;normal&amp;quot; normal distribution &lt;/span&gt;
gplot1 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; stat_function&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fun &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; dnorm&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; labs&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;title &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Normal Distribution&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; theme_old&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;make-a-floating-dress-for-the-paranormal-distribution&quot;&gt;Make a floating dress for the paranormal distribution&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;a &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;-1.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;-0.9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;-0.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
b &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.004431848&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.03&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.0044&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.03&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.030&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.0044&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.015&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.004431848&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

data &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;a &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; a&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; b &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; b&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-0.40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.04&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
d &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
data2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; d &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; d&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;plot-paranormal-distribution&quot;&gt;Plot paranormal distribution&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;gplot2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;a&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;b&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_line&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
gplot2 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; gplot2 &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; stat_function&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fun &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; dnorm&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_point&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; data2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;d&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; pch&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  geom_point&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; data2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-0.008&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;d&lt;span class=&quot;m&quot;&gt;-0.006&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; pch&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
  labs&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;title &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Paranormal Distribution&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; theme_old&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;put-them-together&quot;&gt;Put them together&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;grid.arrange&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;gplot1&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; gplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</description>
        <pubDate>Tue, 20 Oct 2015 00:00:00 -0200</pubDate>
        <link>/blog/r/2015/10/20/paranormal-distribution.html</link>
        <guid isPermaLink="true">/blog/r/2015/10/20/paranormal-distribution.html</guid>
      </item>
    
      <item>
        <title>Competing views on Argentina&#39;s Frontrunner</title>
        <description>&lt;p&gt;The last poll published today by Polldata put Scioli below 40%, with about 5% reporting being undecided.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/img/2015/Daniel_Scioli_Gross_lm.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It might be too early to state anything solid, but the few polls prospecting the runoff election in Argentina seem to be telling two distinct histories. Hugo Haime and IPSOS suggest Daniel Scioli is going up while Elypsis  and Polldata say he’s sinking as weeks go by. The last poll published today by Polldata put Scioli below 40%, with about 5% reporting being undecided.&lt;/p&gt;

</description>
        <pubDate>Mon, 19 Oct 2015 00:00:00 -0200</pubDate>
        <link>/blog/r/2015/10/19/competing-views-in-argentina.html</link>
        <guid isPermaLink="true">/blog/r/2015/10/19/competing-views-in-argentina.html</guid>
      </item>
    
      <item>
        <title>A Talk About Campaign Finance in Brazil</title>
        <description>&lt;p&gt;Comments on campaign finance in brazil.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Last week, I delivered a talk at &lt;a href=&quot;http://www.unb.br&quot;&gt;University of Brasilia&lt;/a&gt; about my past research on the topic of campaign finance. I didn’t know in advance about the existence of this seminar. Indeed, it was a big surprise receiving the invitation from Prof. Marcelo Pimentel, who is teaching on Fridays afternoon a class on this topic with more than 50 registered students. I became his fan after seeing his syllabus. He did managed to assemble a handful studies covering why, what, how, and when money affects politics and elections in Brazil.&lt;/p&gt;

&lt;p&gt;Though I covered a lot of factors in my talk, I think, I had the wrong pictures to show for a heterogeneous crowd. Instead of wasting time showing regression tables, and trying to solve understanding issues after showing them, I should have shown simple yet powerful pictures like the following ones, so to give the intuition about the relationship between money and votes, generally debated in the literature and media.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;images/blog/2015/linearSS.png&quot; alt=&quot;Linear Relationship with SS&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/u-shape.png&quot; alt=&quot;U-Shape Relationship&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Of course, the biggest challenge of this scholarship is how to disentangle any existing confounders in this rather seemingly relationship: votes ~ money.&lt;/p&gt;

&lt;p&gt;Overall, we know the recipe, preparing the dishy is different  thing. Studies being conducted on this area try to find the “treatment effect” of money on votes: What would have happened if the candidate had spent only a fraction of his budget, or What would have happened if the candidate who spent only a fraction could spend more? &lt;/p&gt;

&lt;p&gt;The problem arises because we can see one condition, but never both at the same time. The suboptimal solution is to measure the average effect &lt;code&gt;(Y_1i - Y_0i)&lt;/code&gt;, or the average of groups of candidates, such as incumbents vs non-incumbents. It turns out that comparisons of who spend more or less in elections are likely to be a poor measure of the causal effect of campaign spending simply because selection bias should be extremely high (Morton and Williams, 2010). It’s not trivial to argue that those who has more money to spend would have earned more votes anyway. &lt;/p&gt;

&lt;p&gt;As Angrist and Pischke point out in their 2009’s book, if selection bias is positive, the naïve comparison &lt;code&gt;E(Y_1i | c_i=1) - E(Y_0i | c_i=0)&lt;/code&gt; can be a real problem, since the benefits of spending extra money is exaggerated. &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;images/blog/2015/Angrist_Pischke_bias.png&quot; alt=&quot;U-Shape Relationship&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It could be “easier” to provide causal inference on this if we run a randomized experiment. If the treatment of campaign spending levels is randomly assigned, selection bias would be zero. The experiment don’t need to be that large, if treated units are random selection from the population of candidates, then the impact on treated also applies to the population. Isn’t cool?&lt;/p&gt;

</description>
        <pubDate>Sat, 17 Oct 2015 00:00:00 -0300</pubDate>
        <link>/blog/r/2015/10/17/talk-about-campaign-finance.html</link>
        <guid isPermaLink="true">/blog/r/2015/10/17/talk-about-campaign-finance.html</guid>
      </item>
    
      <item>
        <title>Understanding Margin of Error for Small Populations</title>
        <description>&lt;p&gt;A comment on why does a pollster reported a narrow margin of error despite the small sample.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;I got an email today inquiring if the margin of error reported in the newest poll by Datafolha would possibly be misleading. The polling firm often report surveys with regular sizes (1000/2400), so the margin of error calculated is in the range of +/-2% to +/-3%. &lt;/p&gt;

&lt;p&gt;However, in its &lt;a href=&quot;http://www1.folha.uol.com.br/poder/2015/10/1693217-parlamentares-sao-mais-liberais-do-que-o-eleitorado.shtml&quot;&gt;latest poll&lt;/a&gt;, the pollster sampled only 340 congressmen, reporting a margin of error of 3%. This, apparently did puzzle the attentive reader, who knows the margin of error is an inverse square root function of the sample size. She asks: “Is the reported margin of error correct? Given such a small sample, shouldn’t it be something around 5.3% or so?&lt;/p&gt;

&lt;p&gt;My answer to the question was “sort of”. Firstly, given the fact the population of congressmen is a finite population (594 = 513 deputies + 81 senators), we must apply a Correction Factor for Finite Populations (FPCF), which will reduce the standard error of the mean. Essentially, the correction adjusts for the fact that although the number of elements is small, it comes from a small population too. &lt;/p&gt;

&lt;p&gt;Adjusted by the FPCF, the margin of error is close to what reported by the Datafolha, however, by omitting decimal digits, the pollster arbitrarily narrows the confidence interval (2 * the margin of error) in about 1%. It’s not that usual to round margins of error when reporting them, as a decimal digit may imply in substantial differences in the sample size as illustrated in the graph from Marcelino and Angel’s paper.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/sample_size.jpg&quot; alt=&quot;Sample size vs Confidence Interval&quot; /&gt;&lt;/p&gt;

&lt;p&gt;For pedagogical reasons, I won’t go through the simplified formula. So, let do it step-by-step.&lt;/p&gt;

&lt;h3 id=&quot;margin-of-error-for-large-infinite-populations&quot;&gt;Margin of Error for Large (Infinite) Populations&lt;/h3&gt;
&lt;p&gt;The derivation of the maximum margin of error formula is given by:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;e = zs/sqrt(n)
where:
z = 
2.576 for 99% level of confidence
1.96 for 95% level of confidence
1.645 for 90% level of confidence

s = sqrt(p(1-p))      
p = proportion

n = sample size


e = zs/sqrt(n)
	= (1.96*0.5)/sqrt(340)
	= 0.05314796&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Thus, if we sample n = 340, we get a margin of error of = 5.31%.&lt;/p&gt;

&lt;h3 id=&quot;margin-of-error-for-finite-populations&quot;&gt;Margin of Error for Finite Populations&lt;/h3&gt;

&lt;p&gt;When the population is small (say less than 1 million), or the sample size represents more than 5% of the population, the pollster should multiply the margin of error by the Corrector Factor (FPCF), given the formula: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;e = zs/sqrt(nadj)

where:
z = 
2.576 for 99% level of confidence
1.96 for 95% level of confidence
1.645 for 90% level of confidence

s = sqrt(p(1-p))     
p = proportion 

nadj = (N-1)n/(N-n)   
n = sample size 
N = population size

e = zs/sqrt(nadj)
  = (1.96*0.5)/sqrt((594-1)*340/(594-340))
	= (1.96*0.5)/sqrt(793.7795)
	= 0.03478373&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;By adjusting for finite populations, we get a margin of error of = 3.48%. &lt;/p&gt;

&lt;h3 id=&quot;stretching-the-concept&quot;&gt;Stretching the concept&lt;/h3&gt;
&lt;p&gt;Now, take an instant. I’ve calculated the maximum margin of error–or the global margin because in several situations we don’t know for sure where how the population falls apart on a particular issue. So, by estimating the population is 50/50 divided on the issue, we maximize the margin of error.&lt;/p&gt;

&lt;p&gt;However, if we discover that 74% of the congressmen gave the same answer, as they did on the topic of criminality, then the margin of error of the two means for that particular question would be  smaller: 3%.&lt;/p&gt;

&lt;p&gt;We compute &lt;em&gt;s&lt;/em&gt; and plug it in the previous estimation, as:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;s = sqrt(p(1-p)) 
  = sqrt(0.74*(1-0.74)) 
  = 0.4386342

e = zs/sqrt(nadj)
  = (1.96*0.44)/sqrt((594-1)*340/(594-340))
	= (1.96*0.44)/sqrt(793.7795)
	= 0.0306097&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I found this poll very interesting, Datafolha should conduct polls like that more often. So, we can get to know more about the  average position of our representatives. &lt;/p&gt;
</description>
        <pubDate>Tue, 13 Oct 2015 00:00:00 -0300</pubDate>
        <link>/blog/r/2015/10/13/understanding-margin-of-error.html</link>
        <guid isPermaLink="true">/blog/r/2015/10/13/understanding-margin-of-error.html</guid>
      </item>
    
      <item>
        <title>The butterfly curve</title>
        <description>&lt;p&gt;Have you ever thought drawing your own butterfly?&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/butterfly.png&quot; alt=&quot;Linear Relationship&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I came across the &lt;a href=&quot;https://en.wikipedia.org/wiki/Butterfly_curve_%28transcendental%29&quot;&gt;butterfly curve&lt;/a&gt;, which was discovered by Temple Fay. The butterfly curve is produced by a parametric equation where:&lt;/p&gt;
&lt;mark&gt;x = sin(t) * (e^cos(t)-2cos(λt)-sin(t/12)^5)&lt;/mark&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;mark&gt;y = cos(t) * (e^cos(t)-2cos(λt)-sin(t/12)^5)&lt;/mark&gt;
&lt;p&gt;.
Where t stands for time and &lt;code&gt;λ&lt;/code&gt; for a user input variable.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kn&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;https://raw.githubusercontent.com/danielmarcelino/SciencesPo/master/R/butterfly.R&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

p4 &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; butterfly&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; title&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;100 x 1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

Date of Analysis&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; Wed Oct &lt;span class=&quot;m&quot;&gt;07&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2015&lt;/span&gt;
Computation time&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.01444697&lt;/span&gt;
—————————————————&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</description>
        <pubDate>Wed, 07 Oct 2015 00:00:00 -0300</pubDate>
        <link>/blog/r/2015/10/07/the-butterfly-curve.html</link>
        <guid isPermaLink="true">/blog/r/2015/10/07/the-butterfly-curve.html</guid>
      </item>
    
      <item>
        <title>Isn&#39;t sad that all that matters in an election is the candidate&#39;s height?</title>
        <description>&lt;p&gt;The candidate’s height may be very important in elections.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/Presidentsheight.png&quot; alt=&quot;Linear Regression&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I came across the claim in the US &lt;a href=&quot;http://www.usnews.com/news/articles/2015/07/08/how-tall-are-the-2016-presidential-candidates&quot;&gt;press&lt;/a&gt; suggesting that the taller the candidate, the better his/her chances for success in presidential elections. After a little search, I found this &lt;a href=&quot;https://en.wikipedia.org/wiki/Heights_of_presidents_and_presidential_candidates_of_the_United_States&quot;&gt;Wikipedia&lt;/a&gt; entry, and even some academic research on the issue, mainly relating this phenomenon to some sort of evolutionary instinctual preference. At least in the US, it does make sense to ask how tall is your favorite 2016 presidential candidate.&lt;/p&gt;

&lt;p&gt;I gathered some data on the presidential candidates’ height and popular vote support to test the strength of such claim with a regression analysis. The observations consist of the height of president divided by height of most successful opponent. The association is significant, indeed (F**ing love science!), though the relationship may lose power if other factors are included. The graph above presents the relationship found in the data. Data and scripts are &lt;a href=&quot;https://gist.github.com/danielmarcelino/b2cc9f3964d7608f29b5&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt; After have seen this post on the R-Bloggers aggregator, I realized that the engineer indexed a related postage by &lt;a href=&quot;http://www.r-bloggers.com/who-will-be-the-next-president-of-the-us/&quot;&gt;Arthur Charpentier&lt;/a&gt;, published a few years before.&lt;/p&gt;
</description>
        <pubDate>Tue, 15 Sep 2015 00:00:00 -0300</pubDate>
        <link>/blog/r/2015/09/15/Isn't-sad-that-all-that-matters-in-an-election-is-the-candidate's-height.html</link>
        <guid isPermaLink="true">/blog/r/2015/09/15/Isn't-sad-that-all-that-matters-in-an-election-is-the-candidate's-height.html</guid>
      </item>
    
      <item>
        <title>Argentine general election, 2015</title>
        <description>&lt;p&gt;The Argentina’s 2015 presidential election to be held next October 25th is approaching and the dispute is now more stable  as the major parties announced their candidates last June.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;In the next Sunday, political parties are holding their primaries for the upcoming presidential election. Like in the US, in Argentine  primaries are important for the parties to solve internal disputes, so the winning candidate can run more comfortable with a united party.&lt;/p&gt;

&lt;p&gt;I set up a forecasting model to track down the vote intentions in my neighboring country–the land of tango. I’m still consolidating opinion polls data while trying to get some clues about past pollster’s performance, so I can account for the likely house effect.&lt;/p&gt;

&lt;p&gt;The following graph was adjusted using simple loess techniques. As I already have a reasonable population of polls, I could also adjust a Dirichlet regression, which produces a more robust picture of the dispute (the second graph below). At this stage, however, the model is an oversimplification as some pollsters are more reliable than others. So, I hope next time to posting a more robust forecast.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/loess.png&quot; alt=&quot;Loess Regression&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/dirichletreg.png&quot; alt=&quot;Dirichlet Regression&quot; /&gt;&lt;/p&gt;

&lt;p&gt;From the figures above, we can see that some polls have quite weird sinusoidal artifacts. Considering those are wrong compared to the others, they can influence the trend line estimates if on a particular day the deviating poll is the only measurement we have.&lt;/p&gt;

&lt;h4 id=&quot;house-effects&quot;&gt;House Effects&lt;/h4&gt;
&lt;p&gt;I want to improve the estimates over the next weeks by using better priors for the house effects of each polling firm. For example, in the picture below, pollster “OPSM” polled favorably for Mauricio Macri (blue line/dots) while worst for the official candidate, Daniel Scioli. On the other hand, house “Hugo Haime &amp;amp; Asc.” underestimated the principal opposition candidate (M. Macri) while overestimating Daniel Scioli and the PJ’s dissident, Sergio Massa.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/dirichletreg-pollsters.png&quot; alt=&quot;House Effects&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Let’s think about the implications of this for a moment. Some institutes published polls in which the one or the other candidate over a period of several months is predicted on average two percents below/above the median of all the polls published in that period; this is really hard to believe given that the polling organizations are all claiming to interview a representative group of the population. Even if we acknowledge that the polls are producing some noisy measurements, there would not be this kind of hex. Unless there is a systematic error in the polls that occurs over and over.&lt;/p&gt;

</description>
        <pubDate>Fri, 07 Aug 2015 00:00:00 -0300</pubDate>
        <link>/blog/r/2015/08/07/Argentine-general-election-2015.html</link>
        <guid isPermaLink="true">/blog/r/2015/08/07/Argentine-general-election-2015.html</guid>
      </item>
    
      <item>
        <title>Ternary plots in politics</title>
        <description>&lt;p&gt;When we study elections with this geometric figure, each point of the triangle intuitively represents 3 coordinates, parties, or candidates.&lt;/p&gt;

&lt;!--more--&gt;

&lt;hr /&gt;

&lt;p&gt;This week, I skin a &lt;a href=&quot;http://www.r-bloggers.com/ternary-interpolation-smoothing&quot;&gt;post&lt;/a&gt; by Nicholas Hamilton about ternary plots that made me think, how this geometric diagram has many different application in science fields. Couple weeks ago, I was reading a book by &lt;a href=&quot;http://math.uci.edu/~dsaari/&quot;&gt;Donald Saari&lt;/a&gt;, who uses ternary charts massively to project election outcomes in different electoral settings.&lt;/p&gt;

&lt;p&gt;Perhaps, most common, ternary diagrams are used for projecting 3-parties elections; the same idea can be generalized for more parties, though it gets more complex. When we study elections with this geometric figure, each point of the triangle intuitively represents 3 coordinates (say A, B, C, because I’m creative today) that correspond to the percentage of votes each political organization obtained. From this, we may speculate the composition of the legislative body. Here I use colors to make it fancier.&lt;/p&gt;

&lt;p&gt;The whole point of the book is not about visualize election outcomes, but that election outcomes may be depend on the formula in use to aggregate votes and the number of seats available. Every election result involving three candidates expressed in therm of votes shares is a weighted average or probability mixture of the corner points. For instance, if we have a constituency of M=5 seats, a possible outcome is:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/ternary1.png&quot; alt=&quot;Ternary Plot for Seats Allocation&quot; /&gt;&lt;/p&gt;

&lt;p&gt;If party “A” has 60% of the popular preference, party “B” 20%, and “C” other 20%, then a system using a d’Hondt method to distribute seats proportionally to the parties will give: &lt;em&gt;A(3), B(1), C(1)&lt;/em&gt;. In general, the closer a point is to the vertex representing a candidate’s or parties’ 100% vote share, the larger is its vote share.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/ternary_dhondt.png&quot; alt=&quot;Ternary plot&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Rather than think on edges, we can draw “regions” to make it more intuitive to understanding how electoral formulas can cause small, but consistent changes in constituencies. In the long run, even small changes can affect the number of parties and incentives for coordination among party supporters. The following was drawn exactly as the former, only changing the formula of seat allocation to Saint-Laguë, which produced slightly narrow areas in the edges but in the center.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/ternary_St_Lague.png&quot; alt=&quot;Ternary plot&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Tue, 04 Aug 2015 00:00:00 -0300</pubDate>
        <link>/blog/r/2015/08/04/ternary-plots-in-politics.html</link>
        <guid isPermaLink="true">/blog/r/2015/08/04/ternary-plots-in-politics.html</guid>
      </item>
    
      <item>
        <title>The Greek thing II</title>
        <description>&lt;p&gt;Just few hours before Greeks head to the polls to decide on the bailout agreement, and ultimately, whether the country will stay in the euro, there is no overwhelming advantage of either side. Actually, the margin became blurred over the last three days, with the “Yes” position rehearsing a last-minute recovery. Despite this last-minute trend, the aggregate preference for the “NO” is not too far behind. To frame this in terms of probabilities, when the \( \theta&lt;em&gt;{YES} \) exceeds \( \theta&lt;/em&gt;{NO} \), I adapted a short &lt;a href=&quot;https://gist.github.com/danielmarcelino/9522c58c1dbbd3acc805#file-greek-thing-r&quot;&gt;function&lt;/a&gt; written a while &lt;a href=&quot;http://danielmarcelino.com/bayes-says-dont-worry-about-scotlands-referendum/&quot;&gt;ago&lt;/a&gt; to simulate from a Dirichlet distribution and to compute posterior probabilities shown in the chart below. It’s really nothing, but the &lt;em&gt;YES&lt;/em&gt; outperformed the &lt;em&gt;NO&lt;/em&gt; in &lt;em&gt;57%&lt;/em&gt; of the times.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/probs_greece.png&quot; alt=&quot;Loess&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The polls were aggregated and the “Don’t Know” respondents were distributed accordingly to proportion of the Yes/No reported by the polls.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt;
With polls yesterday showing both sides in a dead heat, today’s overwhelmingly majority of voters saying &lt;em&gt;NO&lt;/em&gt; is a big surprise, isn’t? Plenty of theories will appear to explain why Greeks have chosen to reject the terms of the deal as proposed by EU officials, meanwhile, it’s time for the parties to set up the plan B.&lt;/p&gt;

</description>
        <pubDate>Sat, 04 Jul 2015 00:00:00 -0300</pubDate>
        <link>/blog/r/2015/07/04/the-greek-thingII.html</link>
        <guid isPermaLink="true">/blog/r/2015/07/04/the-greek-thingII.html</guid>
      </item>
    
      <item>
        <title>The Greek thing</title>
        <description>&lt;p&gt;Greeks have been quite volatile on their opinion whether they should accept or not a proposal by the country’s creditors for more austerity to keep aid flowing. The polls conducted over this week look like crazy, though that “belly” was likely provoked by the anxiety on what comes next after Greece not paying IMF back.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/loess_1.png&quot; alt=&quot;Loess&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The data for this analysis were collected on the internet, most of them assembled and made available by &lt;a href=&quot;http://metapolls.net&quot;&gt;http://metapolls.net&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Sat, 04 Jul 2015 00:00:00 -0300</pubDate>
        <link>/blog/r/2015/07/04/the-greek-thing.html</link>
        <guid isPermaLink="true">/blog/r/2015/07/04/the-greek-thing.html</guid>
      </item>
    
      <item>
        <title>Network analysis with igraph</title>
        <description>&lt;p&gt;Suddenly, I had to learn network analysis. Two weeks ago I started with a book by Christakis and Fowler, then a book by Kolaczyk and Csárdi, now here I am in a “how to” analyze network data using R moment. This is much like learning-by-doing knowledge, so may be useful for newcomers, although at this point I’m more concerned on visualization than measuring networks properly.&lt;/p&gt;

&lt;p&gt;This is the part that I loved most: With just two packages, I was able to make not-so-ugly charts, saying publishable. Here, I post on how to go from unrefined to nicer charts in very few steps.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/network1.jpeg&quot; alt=&quot;Network&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/network2.png&quot; alt=&quot;Networks&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;http://gist.github.com/danielmarcelino/dfbd929010c450006ac6#file-network_basic-r&quot;&gt;code&lt;/a&gt;: &lt;/p&gt;

</description>
        <pubDate>Tue, 23 Jun 2015 00:00:00 -0300</pubDate>
        <link>/blog/r/2015/06/23/network-analysis-with-igraph.html</link>
        <guid isPermaLink="true">/blog/r/2015/06/23/network-analysis-with-igraph.html</guid>
      </item>
    
      <item>
        <title>LDA on Ferguson Grand Jury I</title>
        <description>&lt;p&gt;The case of Michael Brown, an unarmed black teenager, who was shot and killed on August 9th, by Darren Wilson, a white police officer, in Ferguson has driven public opinion around the globe to the suburb of St. Louis.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2014/ferguson.jpeg&quot; alt=&quot;LDA&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;motivation&quot;&gt;Motivation&lt;/h3&gt;
&lt;p&gt;The case of Michael Brown, an unarmed black teenager, who was shot and killed on August 9th, by Darren Wilson, a white police officer, in Ferguson has driven public opinion around the globe to the suburb of St. Louis. After few weeks, on Nov. 24, the St. Louis County prosecutor announced that a grand jury decided not to indict Mr. Wilson. This announcement triggered another ongoing wave of protests.&lt;/p&gt;

&lt;p&gt;This trial yields to significant amount of text, which soon became available over the &lt;a href=&quot;http://twitter.com/MitchFraas&quot;&gt;internet&lt;/a&gt;. Thanks for work-horse on the text files, now I can simply &lt;a href=&quot;https://s3.amazonaws.com/fraasdev/FergusonTextGuide.txt&quot;&gt;download&lt;/a&gt; and analyze them.&lt;/p&gt;

&lt;p&gt;I spent few hours learning about LDA–Latent Dirichlet Allocation from a package called Mallet’. The Mallet machine learning package provides an interface to the Java implementation of latent Dirichlet allocation. To process a text file into mallet` a spot list of words file is required. Typically a file with unimportant words and tag marks that can instruct the algorithm.&lt;/p&gt;

&lt;h4 id=&quot;important-packages&quot;&gt;Important packages&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kn&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;devtools&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;repmis&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dplyr&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;mallet&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;cluster&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;wordcloud&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;corrgram&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ellipse&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;RColorBrewer&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;the-dictionary&quot;&gt;The dictionary&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;data_url &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;https://github.com/danielmarcelino/Tables/raw/master/en.txt&amp;#39;&lt;/span&gt;

stop &lt;span class=&quot;kt&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; repmis&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;source_data&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;data_url&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; sep &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;,&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; header &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Having downloaded the documents, let’s import them from the folder. Each document is split as 1000 words chunks. To proceed, we write the stop list file to the path directory.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;docs &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; mallet.read.dir&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;FergusontText/chunks&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

write.table&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;stop &lt;span class=&quot;kt&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;stoplist.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;quote&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; sep&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; row.names&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

mallet.docs &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; mallet.import&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;docs&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;id&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; docs&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;text&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;en.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; token.regexp &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;\p{L}[\p{L}\p{P}]+\p{L}&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Let’s create a topic trainer object for data&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;n.topics &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;50&lt;/span&gt; topic.model &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; MalletLDA&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;n.topics&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And then load the documents:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;topic.model&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;loadDocuments&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;mallet.instances&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now we can actually get the vocabulary and few statistics about word frequencies.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;vocab &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; topic.model&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;getVocabulary&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

word.freq &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; mallet.word.freqs&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.model&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

word.freq &lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt; arrange&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;desc&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;term.freq&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;almost-there&quot;&gt;Almost there&lt;/h4&gt;
&lt;p&gt;Nice, we have all set. Let’s use simulations to optimize hyper parameters every 25 iterations with a warm-up period of 100 iterations (by default, the hyper parameter optimization is on). After this we can actually train the model. Once again, we can specify the number of iterations, or draws after the burn-in. I’m specifying 200 draws.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;topic.model&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;setAlphaOptimization&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

topic.model&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;train&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now it runs through only few iterations, but picking the ‘best’ topic for each token rather than sampling from the posterior distribution.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;topic.model&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;maximize&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Notice that we a structure like: words nested topics, and topics in documents. Thus, it might be a good idea to get the probability of topics in documents and the probability of words in topics.&lt;/p&gt;

&lt;p&gt;There is no magic here. The following functions return raw word counts, as I want probabilities, I’ve to normalize them. I also add smoothing to that so to avoid seen some topics with exactly 0 probability.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;doc.topics &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; mallet.doc.topics&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.model&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; smoothed&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; normalized&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

topic.words &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; mallet.topic.words&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.model&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; smoothed&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; normalized&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now I’ve two matrixes to transpose and normalize the doc:topics&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;topic.docs &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;doc.topics&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

topic.docs &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; topic.docs &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;rowSums&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.docs&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

Write down the output as CSV &lt;span class=&quot;kr&quot;&gt;for&lt;/span&gt; further analysis&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;

write.csv&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.docs&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;ferguson-topics.csv&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now we can obtain a vector with short names for the topics:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;topics.labels &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; n.topics&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic &lt;span class=&quot;kr&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;n.topics&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; topics.labels&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;topic&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;paste&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;mallet.top.words&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.model&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; topic.words&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;topic&lt;span class=&quot;p&quot;&gt;,],&lt;/span&gt; num.top.words&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;words&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; collapse&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Check out the keywords for each topic:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;topics.labels &lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

write.csv&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topics.labels&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;ferguson-topics-lbs.csv&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;correlation-matrix&quot;&gt;Correlation matrix&lt;/h4&gt;
&lt;p&gt;Here, Correlations with significance levels – each 1000 line chunk correlated against the others. Positive correlation – similar topics.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;cor.matrix &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; cor&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.docs&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; use&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;complete.obs&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; method&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;pearson&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
write.csv&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;cor.matrix&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;corr-matrix.csv&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;From here, a variety of analyses can be conducted. As an instance, one could approach this as a network diagram, showing which pieces of the testimony share similar patterns of discourse, which ones do not.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;corrgram&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;cor.matrix&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; order&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; lower.panel&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;panel.shade&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
upper.panel&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; text.panel&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;panel.txt&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
main&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Correlated chunks of the Ferguson&amp;#39;s grand jury testimony&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;gran-finale&quot;&gt;Gran Finale&lt;/h4&gt;
&lt;p&gt;How about turn those bits into word clouds of the topics? A word cloud can be tricky as it doesn’t tell us much of anything if obvious words are included. That’s make our stop-list file key for generating good word clouds. Of course the subject names are going to show up a lot, but a word cloud is a lot more fancy and informative if it brings what sorts of emotional or subjective language is being used.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kr&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;kr&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
topic.top.words &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; mallet.top.words&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.model&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
topic.words&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;p&quot;&gt;,],&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kp&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;wordcloud&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.top.words&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;words&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
topic.top.words&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;weights&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; rot.per&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;random.order&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
colors&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;brewer.pal&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Dark2&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We can also try clustering plot based on shared words:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;hc &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; hclust&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dist&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.words&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dens &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.dendrogram&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;hc&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

plot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dens&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; edgePar&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;col &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; lty &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; dLeaf&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; edge.root &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

plot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;hclust&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dist&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.words&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; labels&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;topics.labels&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It seems to messy, let’s create a data.frame and calculate a similarity matrix:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;topic_docs &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic.docs&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;kp&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic_docs&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; docs&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;id

topic_dist &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;as.matrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;daisy&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic_docs&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; metric &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;euclidean&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; stand &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The following does the trick to keep only closely related documents and avoid a dense diagram, otherwise it can become difficult to interpret. Change row values to zero if less than row minimum + row standard deviation&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;topic_dist&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;sweep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic_dist&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic_dist&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic_dist&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;sd&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;gran-finale-1&quot;&gt;Gran Finale&lt;/h4&gt;
&lt;p&gt;Finally, we can use means to identify groups of similar documents, and further get names for each cluster&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;km &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; kmeans&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;topic_dist&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; n.topics&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

alldocs &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;list&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; length &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; n.topics&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;kr&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;n.topics&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
alldocs&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;i&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;km&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;cluster&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;km&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;cluster &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; i&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</description>
        <pubDate>Tue, 09 Dec 2014 00:00:00 -0200</pubDate>
        <link>/blog/r/2014/12/09/LDA-on-Ferguson-Grand-Jury.html</link>
        <guid isPermaLink="true">/blog/r/2014/12/09/LDA-on-Ferguson-Grand-Jury.html</guid>
      </item>
    
      <item>
        <title>Study of a Plot: The Manhattan Plot</title>
        <description>&lt;p&gt;I was thinking on a nice way of plotting campaign expenditures in a paper I’m working on. I thought this would be something like the following, simple, but meaningful even in the context of lots of outliers in both tails.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2014/manhattan.jpeg&quot; alt=&quot;Manhattan Plot&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Although I like the seniors Tukey’s boxplot and scatter plots, I had already used them, so I want to oxygenate my figures. The  &lt;a href=&quot;http://en.wikipedia.org/wiki/Manhattan_plot&quot;&gt;Manhattan plot&lt;/a&gt; is a potential replacement candidate.&lt;/p&gt;

&lt;p&gt;The very idea is to have types of elections, districts or parties along the X-axis, with the negative logarithm of the association (p-value) between a candidate’s spending and votes displayed on the Y-axis. Hence, each dot on the plot indicates a candidate’s position on this metric. &lt;/p&gt;

&lt;p&gt;Because stronger associations have the smallest p-values (a log of 0.05 = -1.30103), their negative logarithms will be positive and higher (e.g., 1.3), while those with p-values not &lt;a href=&quot;http://www.nature.com/news/scientific-method-statistical-errors-1.14700&quot;&gt;statistically significant&lt;/a&gt; (whatever that means these days, maybe nothing ) will stay below this line.&lt;/p&gt;

&lt;p&gt;The positive thing of this version is that it draws our attention to the upper outliers instead to the average association, which tends to be left-skewed because Brazilian elections attract many sacrificial lamb candidates who expend nearly nothing in their campaigns.&lt;/p&gt;

</description>
        <pubDate>Wed, 03 Dec 2014 00:00:00 -0200</pubDate>
        <link>/blog/r/2014/12/03/study-of-a-plot.html</link>
        <guid isPermaLink="true">/blog/r/2014/12/03/study-of-a-plot.html</guid>
      </item>
    
      <item>
        <title>Flowers/Fractals</title>
        <description>&lt;p&gt;Last week, I attended a “Flower Festival” where I had the opportunity to admire several of the most beautiful and awarded flowers, orchids, and decoration plants. Surprisingly, though, I never had thought of flowers like fractals the way I did this time.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2014/flower_joinville1.jpeg&quot; alt=&quot;Flower&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Fractals attract lots of interest, especially from mathematicians who actually spend some time/research trying to learn about their structures. But what makes something a fractal? A fractal is defined as an object that displays self-similarity on all scales. But the object doesn’t need to have exactly the same structure at all scales only the same sort of structure must be visible or recognizable any how. &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2014/flower_joinville.jpeg&quot; alt=&quot;Flower&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The structure or the equation that defines a fractal is most of the time very simple. For instance, the formula for the famous &lt;a href=&quot;https://en.wikipedia.org/wiki/Mandelbrot_set&quot;&gt;Mandelbrot&lt;/a&gt; is \[ z_{n+1}=z_n^2+c \].&lt;/p&gt;

&lt;p&gt;We start by plugging in a constant value for $c$, $z$ can start at zero. After one iteration, the equation gives us a new value for $z$; then we plug this back into the equation at old $z$ and iterate it again, it can proceed infinitely.&lt;/p&gt;

&lt;p&gt;As a very simple example, let’s start this with c = 1.&lt;/p&gt;

&lt;p&gt;\[ z&lt;em&gt;{1} = z&lt;/em&gt;{02} + c= 0 + 1 = 1 \]
\[ z&lt;em&gt;{2} = z&lt;/em&gt;{12} + c = 1 + 1 = 2 \]
\[ z&lt;em&gt;{3} = z&lt;/em&gt;{22} + c = 4 + 1 = 5 \]&lt;/p&gt;

&lt;p&gt;Graphing these results against &lt;em&gt;n&lt;/em&gt; would create an upward parabolic curve because the numbers increase exponentially (to infinity). But if we start with c = -1 for instance, $z$ will behave completely different. That is, it will oscillate between two fixed points as:&lt;/p&gt;

&lt;p&gt;\[ z&lt;em&gt;{1} = z&lt;/em&gt;{02} + c= 0 + -1 = -1 \]
\[ z&lt;em&gt;{2} = z&lt;/em&gt;{12} + c = 1 + (-1) = 0 \]
\[ z&lt;em&gt;{3} = z&lt;/em&gt;{22} + c = 0 + (- 1) = -1 \]
\[ z&lt;em&gt;{4} = z&lt;/em&gt;{32} + c = 1 + (- 1) = 0 \]&lt;/p&gt;

&lt;p&gt;And this movement back and forth will continue forever as we can imagine. I figured out, that the Mandelbrot set is made up of all the values for $z$ that stay finite, thus a solution such as the first example for $c = 1$ is not valid and will be thrown out because $z$ in those cases goes to infinity and Mandelbrot lives in a finite world. The following is an example of such set.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2014/Mandelbrot.gif&quot; alt=&quot;Mandelbroat&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The script for this set:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kn&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;caTools&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;c1&quot;&gt;# caTools is handy because it provides write.gif function&lt;/span&gt;

cols &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; colorRampPalette&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;#00007F&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;brown&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;#007FFF&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;green&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;#7FFF7F&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;yellow&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;#FF7F00&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;#7F0000&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;magenta&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
m &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1200&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# define size&lt;/span&gt;
C &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;complex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; real&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;seq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-1.8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; length.out&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;m&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; each&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;m &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
              imag&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;seq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-1.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; length.out&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;m&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; m &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
C &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;C&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;m&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;m&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# reshape as square matrix&lt;/span&gt;
Z &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# initialize Z to zero&lt;/span&gt;
X &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;m&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;m&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# initialize output 3D array&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;k &lt;span class=&quot;kr&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# loop with 20 iterations&lt;/span&gt;
    Z &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; Z&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;C &lt;span class=&quot;c1&quot;&gt;# The equation&lt;/span&gt;
    X&lt;span class=&quot;p&quot;&gt;[,,&lt;/span&gt;k&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Z&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# capture results&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
write.gif&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;X&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Mandelbrot.gif&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; col&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;cols&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; delay&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</description>
        <pubDate>Fri, 21 Nov 2014 00:00:00 -0200</pubDate>
        <link>/blog/r/2014/11/21/flowers-and-fractals.html</link>
        <guid isPermaLink="true">/blog/r/2014/11/21/flowers-and-fractals.html</guid>
      </item>
    
      <item>
        <title>Frente Amplio Winnability</title>
        <description>&lt;p&gt;Uruguayan voters are about to give give Frente Amplio a third mandate this November 30th. The following graph shows how the outcome would look like if the election were held this week. The undecided voters were distributed accordingly to each party as by the election day. The picture draws the pdf’s for FA and PN vote support as published by 6 major polling houses. The script can de found here.&lt;/p&gt;

&lt;p&gt;As the picture suggests, the posterior densities are quite apart from each other and their confidence regions narrow, meaning that we have less uncertainty about the results under that area.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2014/FAwinnability.png&quot; alt=&quot;FA&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Fri, 14 Nov 2014 00:00:00 -0200</pubDate>
        <link>/blog/r/2014/11/14/frente-amplio-winnability.html</link>
        <guid isPermaLink="true">/blog/r/2014/11/14/frente-amplio-winnability.html</guid>
      </item>
    
      <item>
        <title>Runoff in Uruguay: FA is expected to win a third mandate</title>
        <description>&lt;p&gt;Within 2 weeks, electors in Uruguay will vote for the runoff election between FA and PN. According to the polling data being published, it’s very likely Uruguayans will give FA a third mandate. I run the following forecast model which suggest that the difference between the two parties are huge; even greater than the number of undecided voters.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/danielmarcelino/8e018efcf13a6287f9b8.js&quot;&gt;&lt;/script&gt;

&lt;h4 id=&quot;tabar-vzquez--frente-amplio&quot;&gt;Tabaré Vázquez – Frente Amplio:&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2014/Frente_Amplio.png&quot; alt=&quot;Tabaré Vázquez&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;luis-lacalle-pou--partido-nacional&quot;&gt;Luis Lacalle Pou – Partido Nacional:&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2014/Partido_Nacional.jpeg&quot; alt=&quot;Luis Lacalle Pou&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 14 Nov 2014 00:00:00 -0200</pubDate>
        <link>/blog/r/2014/11/14/Runoff-in-Uruguay-FA-is-expected-to-win-a-third-mandate.html</link>
        <guid isPermaLink="true">/blog/r/2014/11/14/Runoff-in-Uruguay-FA-is-expected-to-win-a-third-mandate.html</guid>
      </item>
    
      <item>
        <title>A bit more fragmented</title>
        <description>&lt;p&gt;The election gave rise to an even more fragmented lower chamber in Brazil.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/2015/EffectiveNumberParties.png&quot; alt=&quot;The Golosov effective number of parties&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;the-2014-legislative-election&quot;&gt;The 2014 legislative election&lt;/h4&gt;
&lt;p&gt;This year, the election gave rise to an even more fragmented House. The way political scientists measure how fragmented is political system or a legislative body is by applying a formula for calculating the Effective Number of Parties. It’s a measure that helps researchers to go beyond the simple (absolute) number of parties. A widely accepted formula was proposed by M. Laakso and R. Taagepera: &lt;/p&gt;

&lt;p&gt;\[ N =\frac{1}{sum&lt;em&gt;{i=1}^{n}p&lt;/em&gt;{i}^{2}} \]&lt;/p&gt;

&lt;p&gt;where N denotes the effective number of parties and p_i denotes the $i^{th}$ party’s fraction of the seats. The problem with this method is that it produces distortions, particularly for small parties.&lt;/p&gt;

&lt;p&gt;Some years ago, Grigorii Golosov proposed a new method for computing the effective number of parties in which both larger and smaller parties are not attributed unrealistic scores as those believed with the Laakso—Taagepera index.&lt;/p&gt;

&lt;p&gt;\[ N = sum&lt;em&gt;{i=1}^{n}\frac{p&lt;/em&gt;{i}}{p&lt;em&gt;{i}+p{i}^{2}-p&lt;/em&gt;{i}^{2}} \]&lt;/p&gt;

&lt;p&gt;To compare the evolution of the effective number of parties in the Brazilian lower chamber between 2002 to 2014 elections, I wrote a small function that computes some political diversity measures including the new proposed method of counting parties by &lt;a href=&quot;http://ppq.sagepub.com/content/16/2/171.abstract&quot;&gt;Golosov (2010)&lt;/a&gt;. 
The results suggest we had a big jump between 2010 to 2014, from 10.5 to 14.5 in the Golosov scale. The results using the standard method by Laakso and Taagepera were also computed.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kn&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;SciencesPo&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;### 2010 Election outcome as proportion of seats&lt;/span&gt;
 seats_2010 &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;88&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;79&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;53&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;m&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;513&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;### 2014 Election outcome as proportion of seats&lt;/span&gt;
 seats_2014 &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;66&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;55&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;37&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;38&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;513&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; politicalDiversity&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;seats_2010&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; index&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;laakso/taagepera&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;10.369&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; politicalDiversity&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;seats_2010&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; index&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;golosov&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;10.511&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; politicalDiversity&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;seats_2014&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; index&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;laakso/taagepera&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;13.064&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; politicalDiversity&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;seats_2014&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; index&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;golosov&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;14.472&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</description>
        <pubDate>Mon, 06 Oct 2014 00:00:00 -0300</pubDate>
        <link>/blog/r/2014/10/06/A-bit-more-fragmented.html</link>
        <guid isPermaLink="true">/blog/r/2014/10/06/A-bit-more-fragmented.html</guid>
      </item>
    
	</channel>
</rss>
