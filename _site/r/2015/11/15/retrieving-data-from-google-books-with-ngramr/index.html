<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
		
<title>&middot; Daniel &middot; Retrieving Data from Google Books with `ngramr`</title>
        <!-- favicon -->
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge' chrome=1>
	<meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ" />
	<meta name="bing_webmastertools_id" content="97837256955BD270FD688E2B50F89FDB" />
    <meta name="description" content="Code and data"/>
    <meta name="viewport" content="width=device-width">
    <meta name="author" content="Daniel Marcelino"/>
    <meta name="viewport" content="width=640px, initial-scale=1.0, maximum-scale=1.5">	
    <meta name="keywords" content="Daniel Marcelino, SciencesPo, SoundexBr, r-project, r-cran, r, statistics, methods, programming, data mining, data visualization, datascience, data"/>	
    
    <meta name="description" content="Karl Marx is the most famous founding fathers of modern sociology with a popularity peak in 1975-6, but declining ever since.
" />
    <meta property="og:description" content="Karl Marx is the most famous founding fathers of modern sociology with a popularity peak in 1975-6, but declining ever since.
" />
    
    <meta name="author" content="EnfoRced Data Analysis" />
    
    <meta property="og:title" content="Retrieving Data from Google Books with `ngramr`" />
    <meta property="twitter:title" content="Retrieving Data from Google Books with `ngramr`" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

	<link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/atom+xml" title="EnfoRced Data Analysis - Blog of Daniel Marcelino" href="/atom.xml" />
	 <link rel="alternate" type="application/rss+xml" title="EnfoRced Data Analysis - Blog of Daniel Marcelino" href="/feed.xml" />
    <link rel="alternate" type="application/rss+xml" title="EnfoRced Data Analysis - Blog of Daniel Marcelino" href="/feed.r.xml" />
	
        <!-- Google Fonts -->
		<link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,300,400,600" rel="stylesheet" type="text/css">
		<link href='http://fonts.googleapis.com/css?family=Vollkorn' rel='stylesheet' type='text/css'>
        <!-- Custom CSS -->
		  <!-- Jquery & D3js -->
	   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	   <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
		
		
    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="https://41.media.tumblr.com/05546119a35e7acb34a47344bc7de012/tumblr_nypg9aPsBy1v0aqj1o1_500.jpg" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">EnfoRced Data Analysis</a></h1>
            <p class="site-description">Blog of Daniel Marcelino</p>
          </div>

          <nav>
            <a href="/">Blog</a>
            <a href="/about">About</a>
			<a href="/research">Research</a>
			<a href="/randomwalks">Random Walks</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [ ['$', '$'], ["\(", "\)"] ],
        displayMath: [ ['$$', '$$'], ["\[", "\]"] ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
      //,
      //displayAlign: "left",
      //displayIndent: "2em"
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>


	
<article class="post">
  <h1>Retrieving Data from Google Books with `ngramr`</h1>

  <div class="entry">
    <p><a href="https://en.wikipedia.org/wiki/Karl_Marx">Karl Marx</a> is the most famous founding fathers of modern sociology with a popularity peak in 1975-6, but declining ever since.</p>

<!--more-->

<p><img src="http://danielmarcelino.github.io/img/code-2015-11-15-retrieving-data-from-google-books-with-ngramr/GoogleNgram.png" alt="center"></p>

<hr/>

<h2 id="introduction">Introduction</h2>

<p>Google has a tool for tracking the frequency of words or phrases across its vast collection of scanned texts, the Google Books. The <a href="https://books.google.com/ngrams">Google Ngram Viewer</a> reports data and graphs the frequency of words encountered in one or across several <em>corpus</em> over time. For instance, the chart above campares the appearance <mark>in the English</mark> <em>corpus</em> of following bigrams names: &quot;Karl Marx&quot;, &quot;Max Weber&quot;, &quot;Emile Durkheim&quot;. </p>

<p>The y-axis shows of all the bigrams contained in the sample of books written in English, what percentage of them are &quot;Karl Marx&quot; or &quot;Max Weber&quot; or &quot;Emile Durkheim&quot;? From the chart above, we can conclude that Marx is the most famous sociologist among the others founding fathers, with a peak in popularity about 1975-6, but his influence has been declining ever since. These thinkers are considered the founding fathers of sociology because they set out to develop practical and scientifically sound methods of research to examine theories of the social world rooted in a specific historical and cultural context. </p>

<h2 id="using-r-with-google-ngram-viewer">Using R with Google Ngram Viewer</h2>

<p>There is a package to query the Google Ngram called <a href="https://cran.r-project.org/web/packages/ngramr/index.html">ngramr</a> written by Sean Carmody. With this package, one can retrieve data from Ngram pages in the form of data frame.  </p>

<h2 id="getting-started">Getting Started</h2>

<p>The first thing to do is to load the <code>ggplot2</code> and <code>ngramr</code> packages. In case you don&#39;t have them installed, an installation is required.</p>

<h2 id="write-a-query-and-do-the-plots">Write a Query and Do the Plots</h2>

<p>The following is equivalent to the chart above for the three sociologists bigrams, except that I&#39;m applying a smoothed line--or moving average of 5 years, so trends become more apparent. For instance, the data shown for 2000 is an average of the raw count for 2000 plus 5 values on either side: (&quot;count for 1995&quot; + &quot;count for 2000&quot; + &quot;count for 2005&quot;), divided by 3. So a smoothing of 5 means that 11 values will be averaged: 5 on either side, plus the target value in the center of them.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">ng <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;(Karl Marx)&quot;</span><span class="p">,</span> <span class="s">&quot;(Max Weber)&quot;</span><span class="p">,</span> <span class="s">&quot;(Emile Durkheim)&quot;</span><span class="p">)</span> 
ggram<span class="p">(</span>ng<span class="p">,</span> year_start <span class="o">=</span> <span class="m">1800</span><span class="p">,</span> 
      year_end <span class="o">=</span> <span class="m">2012</span><span class="p">,</span>  
      smoothing <span class="o">=</span> <span class="m">5</span><span class="p">,</span>
      google_theme <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span> <span class="o">+</span>
  ggtitle<span class="p">(</span><span class="s">&quot;Marx, Weber, Durkheim&quot;</span><span class="p">)</span><span class="o">+</span>
    theme_538<span class="p">(</span>legend.position <span class="o">=</span> <span class="s">&quot;bottom&quot;</span><span class="p">)</span></code></pre></div>

<p><img src="http://danielmarcelino.github.io/img/code-2015-11-15-retrieving-data-from-google-books-with-ngramr/sociologists-1.png" alt="center"> </p>

<h2 id="complex-queries">Complex Queries</h2>

<p>I test the trend in popularity of the unigran &quot;Capitalism&quot; vis-à-vis other two unigrans (&quot;Socialism&quot;, &quot;Communism&quot;) from 1850 to 2012. Here&#39;s how we might combine + and / to show how the unigram &quot;Capitalism&quot; has blossomed at the expense of &quot;Socialism&quot; and &quot;Communism&quot; terms in the literature published in English.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">ng <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Capitalism /(Capitalism + Socialism + Communism)&quot;</span><span class="p">)</span>
cap <span class="o">&lt;-</span> ggram<span class="p">(</span>ng<span class="p">,</span> year_start <span class="o">=</span> <span class="m">1850</span><span class="p">,</span> 
      year_end <span class="o">=</span> <span class="m">2012</span><span class="p">,</span>  
      smoothing <span class="o">=</span> <span class="m">3</span><span class="p">,</span>
      google_theme <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span> <span class="o">+</span>
  ggtitle<span class="p">(</span><span class="s">&quot;Capitalism over (Capitalism + Socialism + Communism)&quot;</span><span class="p">)</span><span class="o">+</span>
    theme_538<span class="p">()</span>

ng <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Socialism /(Capitalism + Socialism + Communism)&quot;</span><span class="p">)</span>
soc <span class="o">&lt;-</span> ggram<span class="p">(</span>ng<span class="p">,</span> year_start <span class="o">=</span> <span class="m">1850</span><span class="p">,</span> 
      year_end <span class="o">=</span> <span class="m">2012</span><span class="p">,</span>  
      smoothing <span class="o">=</span> <span class="m">3</span><span class="p">,</span>
      google_theme <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span> <span class="o">+</span>
  ggtitle<span class="p">(</span><span class="s">&quot;Socialism over (Capitalism + Socialism + Communism)&quot;</span><span class="p">)</span><span class="o">+</span>
    theme_538<span class="p">()</span>

ng <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Communism /(Capitalism + Socialism + Communism)&quot;</span><span class="p">)</span>
com <span class="o">&lt;-</span> ggram<span class="p">(</span>ng<span class="p">,</span> year_start <span class="o">=</span> <span class="m">1850</span><span class="p">,</span> 
      year_end <span class="o">=</span> <span class="m">2012</span><span class="p">,</span>  
      smoothing <span class="o">=</span> <span class="m">3</span><span class="p">,</span>
      google_theme <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span> <span class="o">+</span>
  ggtitle<span class="p">(</span><span class="s">&quot;Communism over (Capitalism + Socialism + Communism)&quot;</span><span class="p">)</span><span class="o">+</span>
    theme_538<span class="p">()</span>
multiplot<span class="p">(</span>cap<span class="p">,</span> soc<span class="p">,</span> com<span class="p">,</span> ncols<span class="o">=</span><span class="m">1</span><span class="p">)</span>
ggfootnote<span class="p">(</span>size <span class="o">=</span> <span class="m">.5</span><span class="p">)</span></code></pre></div>

<p><img src="http://danielmarcelino.github.io/img/code-2015-11-15-retrieving-data-from-google-books-with-ngramr/Capitalism%20Popularity-1.png" alt="center"> </p>

<p>In the following, I retrieve the frequency for the unigram &quot;Capitalism&quot; in the Russian <em>corpus</em>, French, and British English. Note that the results can be case-insensitive variants.</p>

<p>Below is a plot of the unigram &quot;Capitalism&quot; (&quot;капитализм&quot;) in the Russian language <em>corpus</em>.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">ng <span class="o">&lt;-</span> <span class="s">&quot;капитализм&quot;</span>
rus<span class="o">=</span>ggram<span class="p">(</span>ng<span class="p">,</span> year_start <span class="o">=</span> <span class="m">1850</span><span class="p">,</span> 
      corpus <span class="o">=</span> <span class="s">&quot;rus_2012&quot;</span><span class="p">,</span>
      ignore_case <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> 
      google_theme <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">+</span>
    ggtitle<span class="p">(</span><span class="s">&quot;Russian: капитализм&quot;</span><span class="p">)</span><span class="o">+</span>
     theme_538<span class="p">()</span>

ng <span class="o">&lt;-</span> <span class="s">&quot;capitalisme&quot;</span>
fre<span class="o">=</span>ggram<span class="p">(</span>ng<span class="p">,</span> year_start <span class="o">=</span> <span class="m">1850</span><span class="p">,</span> 
      corpus <span class="o">=</span> <span class="s">&quot;fre_2012&quot;</span><span class="p">,</span>
      ignore_case <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> 
      google_theme <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">+</span>
    ggtitle<span class="p">(</span><span class="s">&quot;French: Capitalisme&quot;</span><span class="p">)</span><span class="o">+</span>
     theme_538<span class="p">()</span>

ng <span class="o">&lt;-</span> <span class="s">&quot;capitalism&quot;</span>
eng<span class="o">=</span>ggram<span class="p">(</span>ng<span class="p">,</span> year_start <span class="o">=</span> <span class="m">1850</span><span class="p">,</span> 
      corpus <span class="o">=</span> <span class="s">&quot;eng_gb_2012&quot;</span><span class="p">,</span>
      ignore_case <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> 
      google_theme <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">+</span>
    ggtitle<span class="p">(</span><span class="s">&quot;English: Capitalism&quot;</span><span class="p">)</span><span class="o">+</span>
     theme_538<span class="p">()</span>

multiplot<span class="p">(</span>rus<span class="p">,</span> fre<span class="p">,</span> eng<span class="p">,</span> ncols<span class="o">=</span><span class="m">1</span><span class="p">)</span>
ggfootnote<span class="p">(</span>size <span class="o">=</span> <span class="m">.5</span><span class="p">)</span></code></pre></div>

<p><img src="http://danielmarcelino.github.io/img/code-2015-11-15-retrieving-data-from-google-books-with-ngramr/capitalism-1.png" alt="center"> </p>

  </div>

  <div class="date">
    Written on November 15, 2015
  </div>

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'daniel-marcelino';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</article>


    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
           <footer>
      <div class="row">
          <div class="col-md-4 text-left">
            Daniel Marcelino 2015 <span class="fa fa-creative-commons"></span>
          </div>
           <div class="col-md-4 text-center">
            <span class="fa fa-pencil"></span> with <span class="red pulse fa fa-heart"></span> &
            <span class="fa fa-coffee"></span>.
              <span class="fa fa-code"></span> in <span class="fa fa-github-alt"></span>
            </a>
          </div>
        <div class="col-md-4 text-right">
          <a
            href ="https://twitter.com/dmarcelinobr"
            title="My twitter account">
              <span class="thunder fa fa-twitter"></span>
          </a>
          <a
            href ="https://facebook.com/dmarcelinobr"
            title="My facebook account">
              <span class="thunder fa fa-facebook-official"></span>
          </a>
          <a
            href ="https://cl.linkedin.com/in/daniel-marcelino-80968656"
            title="My linkedin profile">
              <span class="thunder fa fa-linkedin"></span>
          </a>
          <a
            href ="https://plus.google.com/+dmsilva.br/posts"
            title="My google profile">
              <span class="thunder fa fa-google-plus"></span>
          </a>
          <a
            href ="https://github.com/danielmarcelino/"
            title="My github repos!">
              <span class="thunder fa fa-github"></span>
          </a>
          <a
            href ="https://github.com/danielmarcelino/"
            title="My github repos!">
              <span class="thunder fa fa-rss"></span>
          </a>
        </div>
        
      </div>
	 
  </footer>
        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-24186657-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/r/2015/11/15/retrieving-data-from-google-books-with-ngramr/',
		  'title': 'Retrieving Data from Google Books with `ngramr`'
		});
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
