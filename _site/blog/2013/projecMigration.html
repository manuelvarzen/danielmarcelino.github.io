<!DOCTYPE html>
<html lang="en">

<link rel="shortcut icon" href="/img/icon.ico" type="image/x-icon" />

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Blog of Daniel Marcelino">

    <title>Migration: forward survival method - EnfoRced Data Analysis</title>

    <link rel="canonical" href="http://danielmarcelino.github.io/blog/2013/projecMigration.html">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="http://danielmarcelino.github.io/feed.xml" title="EnfoRced Data Analysis" />

</head>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-34554402-2', 'sdaza.com');
  ga('send', 'pageview');

</script>

<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <!-- <a class="navbar-brand" href="/">EnfoRced Data Analysis</a> -->
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                  <li>
                    <a href="/docs/cv_sdaza.pdf">CV</a>
                </li>
                
				

                <li>
                    <a href="/01research">Research</a>
                </li>
				
                
				

                <li>
                    <a href="/02archive">Posts</a>
                </li>
				
                
				

                <li>
                    <a href="/03about">About</a>
                </li>
				
                
				

                <li>
                    <a href="/04contact">Contact</a>
                </li>
				
                
				

                <li>
                    <a href="/thanks">Contact</a>
                </li>
				
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <script language="javascript">
    function typeset() {
        MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }

    function disqus_config() {
        this.callbacks.onNewComment = [typeset];
        this.callbacks.onInit = [typeset];
    }


    if(window.MathJax===undefined){
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src  = "http://cdn.mathjax.org/mathjax/latest/MathJax.js";
        var config = 'MathJax.Hub.Config({' +
                    'extensions: ["tex2jax.js"],' +
                    'tex2jax: { inlineMath: [ ["$","$"]], displayMath: [["\$$","\$$"]], processEscapes: true },' +
                    'jax: ["input/TeX","output/HTML-CSS"]' +
                    '});' +
                    'MathJax.Hub.Startup.onload();';
        if (window.opera)
            script.innerHTML = config;
        else
            script.text = config;
        document.getElementsByTagName("head")[0].appendChild(script);
    }
</script>

<!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/demography.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Migration: forward survival method</h1>
                    
                    <span class="meta">Posted by EnfoRced Data Analysis on July 3, 2013</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<p>This is a question about estimating incoming and outgoing movements of population. I have data on enrollment at a small college in 2009 and 2010, and also the information on student-years enrolled before students drop out of the college ($_nL_x$). Each year 400 freshman enroll. What is the number of net transfers (incoming minus outgoing) between 2009 and 2010?</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left">2009</th>
      <th style="text-align: left">2010</th>
      <th style="text-align: left">$_nL_x$</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Freshman</td>
      <td style="text-align: left">400</td>
      <td style="text-align: left">400</td>
      <td style="text-align: left">99</td>
    </tr>
    <tr>
      <td style="text-align: left">Sophomore</td>
      <td style="text-align: left">350</td>
      <td style="text-align: left">389</td>
      <td style="text-align: left">90</td>
    </tr>
    <tr>
      <td style="text-align: left">Junior</td>
      <td style="text-align: left">300</td>
      <td style="text-align: left">420</td>
      <td style="text-align: left">80</td>
    </tr>
    <tr>
      <td style="text-align: left">Senior</td>
      <td style="text-align: left">300</td>
      <td style="text-align: left">350</td>
      <td style="text-align: left">78</td>
    </tr>
    <tr>
      <td style="text-align: left">Higher</td>
      <td style="text-align: left">300</td>
      <td style="text-align: left">300</td>
      <td style="text-align: left">77</td>
    </tr>
  </tbody>
</table>

<p>Basically, I have to estimate the “extra”  population observed during 2010 that doesn’t come from enrollment (births) or mortality (drop-outs). That is, to project the 2009 population assuming that is closed to migration. Just looking at the table one can see that the population is growing due to transfers (mortality and births are constant).</p>

<p>First, I estimate the survival ratios:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p2009</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="m">400</span><span class="p">,</span> <span class="m">350</span><span class="p">,</span> <span class="m">300</span><span class="p">,</span> <span class="m">300</span><span class="p">,</span> <span class="m">300</span><span class="p">)</span>
<span class="n">p2010</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="m">400</span><span class="p">,</span> <span class="m">389</span><span class="p">,</span> <span class="m">420</span><span class="p">,</span> <span class="m">350</span><span class="p">,</span> <span class="m">300</span><span class="p">)</span>
<span class="n">Lx</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="m">99</span><span class="p">,</span> <span class="m">90</span><span class="p">,</span> <span class="m">80</span><span class="p">,</span> <span class="m">78</span><span class="p">,</span> <span class="m">77</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># survival ratios
</span><span class="n">sr</span> <span class="o">&lt;-</span> <span class="n">NA</span>
<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="m">1</span><span class="o">:</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">Lx</span><span class="p">)</span> <span class="o">-</span> <span class="m">1</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">sr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="n">Lx</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="m">1</span><span class="p">]</span><span class="o">/</span><span class="n">Lx</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># open-end interval
</span><span class="n">sr</span><span class="p">[</span><span class="n">length</span><span class="p">(</span><span class="n">sr</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="n">Lx</span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="n">Lx</span><span class="p">[</span><span class="m">4</span><span class="p">]</span> <span class="o">+</span> <span class="n">Lx</span><span class="p">[</span><span class="m">5</span><span class="p">])</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] 0.909 0.889 0.975 0.497</code></pre></figure>

<p>Second, I define the matrix to do the projection:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">m</span> <span class="o">&lt;-</span> <span class="n">matrix</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>

<span class="c1"># The population of the first interval has always to be
# 400*99/100 (births are constant)
</span><span class="n">m</span><span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="m">99</span><span class="o">/</span><span class="m">100</span>
<span class="c1"># Because the population of the first interval is 400 in
# 2009 I use this shortcut
</span><span class="n">s</span> <span class="o">&lt;-</span> <span class="n">diag</span><span class="p">(</span><span class="m">4</span><span class="p">)</span>
<span class="n">s</span> <span class="o">&lt;-</span> <span class="n">s</span> <span class="o">*</span> <span class="n">sr</span>
<span class="n">m</span><span class="p">[</span><span class="m">2</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="n">s</span>
<span class="n">m</span><span class="p">[</span><span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="n">sr</span><span class="p">[</span><span class="m">4</span><span class="p">]</span></code></pre></figure>

<p>The result is not exactly a Leslie matrix because I don’t have fertility rates in the first row.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##       [,1]  [,2]  [,3]  [,4]  [,5]
## [1,] 0.990 0.000 0.000 0.000 0.000
## [2,] 0.909 0.000 0.000 0.000 0.000
## [3,] 0.000 0.889 0.000 0.000 0.000
## [4,] 0.000 0.000 0.975 0.000 0.000
## [5,] 0.000 0.000 0.000 0.497 0.497</code></pre></figure>

<p>Finally, I can project forward:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">proj2010</span> <span class="o">&lt;-</span> <span class="n">m</span> <span class="o">%*%</span> <span class="n">p2009</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##      [,1]
## [1,]  396
## [2,]  364
## [3,]  311
## [4,]  292
## [5,]  298</code></pre></figure>

<p>The number of net transfers would be the differences between the observed population in 2010, and the 2010 projected population assuming that it is closed to migration (no transfers).</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">sum</span><span class="p">(</span><span class="n">p2010</span> <span class="o">-</span> <span class="n">proj2010</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] 198</code></pre></figure>

<p>This was an example of the forward survival method to estimate migration.</p>


                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/blog/2013/projections.html" data-toggle="tooltip" data-placement="top" title="Cohort component projection">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/blog/2014/samplesize.html" data-toggle="tooltip" data-placement="top" title="Functions for sample size and error">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/dmarcelinobr">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="https://github.com/danielmarcelino">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:dmarcelino@live.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Daniel Marcelino 2016</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
