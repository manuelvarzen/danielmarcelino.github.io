<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Parallel computing in R &#8211; Data * Analysis + R</title>
<meta name="description" content="Parallel computing is incredibly useful, but not every thing worths distribute across as many cores as possible.

">
<meta name="keywords" content="R">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Parallel computing in R">
<meta name="twitter:description" content="Parallel computing is incredibly useful, but not every thing worths distribute across as many cores as possible.

">
<meta name="twitter:site" content="@dmarcelinobr">
<meta name="twitter:creator" content="@dmarcelinobr">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://danielmarcelino.github.io/images/img/daniel_rio.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Parallel computing in R">
<meta property="og:description" content="Parallel computing is incredibly useful, but not every thing worths distribute across as many cores as possible.

">
<meta property="og:url" content="http://danielmarcelino.github.io/blog/2014/Parallel-computing-in-R.html">
<meta property="og:site_name" content="Data * Analysis + R">





<link rel="canonical" href="http://danielmarcelino.github.io/blog/2014/Parallel-computing-in-R.html">
<link href="http://danielmarcelino.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Data * Analysis + R Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://danielmarcelino.github.io/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://danielmarcelino.github.io/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://danielmarcelino.github.io/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://danielmarcelino.github.io/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://danielmarcelino.github.io/favicon.ico?r=31241">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://danielmarcelino.github.io/favicon.png?r=31241">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://danielmarcelino.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://danielmarcelino.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://danielmarcelino.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://danielmarcelino.github.io/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="http://danielmarcelino.github.io/home/" >Home</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/blog/" >Blog</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/interests/" >Interests</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/about/" >About</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/randomwalks/" >Random Walks</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/blogroll/" >Resources</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/search/" >Search</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="http://danielmarcelino.github.io/" class="site-logo" rel="home" title="Data * Analysis + R"><img src="http://danielmarcelino.github.io/images/img/daniel_rio.jpg" width="200" height="200" alt="Data * Analysis + R logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="http://danielmarcelino.github.io/">Data * Analysis + R</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">Blog of Daniel Marcelino</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://danielmarcelino.github.io/tags/#R" title="Pages tagged R">R</a></span>
        
          <h1 class="entry-title">Parallel computing in R</h1>
        
      </header>
      <footer class="entry-meta">
        
        
          <img src="http://danielmarcelino.github.io/images/img/daniel_rio.jpg" class="bio-photo" alt="Daniel Marcelino bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Daniel Marcelino</span></span>
        <span class="entry-date date published"><time datetime="2014-07-01T00:00:00-03:00"><i class="fa fa-calendar-o"></i> July 01, 2014</time></span>
        
        <span class="entry-comments"><i class="fa fa-comment-o"></i> <a href="#disqus_thread">Comment</a></span>
        
        
      </footer>
      <div class="entry-content">
        <p>Parallel computing is incredibly useful, but not every thing worths distribute across as many cores as possible.</p>

<p>Roughly a year ago I published an article about parallel computing in R <a href="http://danielmarcelino.com/r/05-2013/parallel-processing-when-does-it-worth/">here</a>, in which I compared computation performance among 4 packages that provide R with parallel features once R is essentially a single-thread task package.</p>

<p><img src="http://danielmarcelino.github.io/img/2014/parallel.png" alt="Experiment Result" /></p>

<p>Parallel computing is incredibly useful, but not every thing worths distribute across as many cores as possible. Actually, there are cases without enough repetitions that R will gain in performance through serial computation. That is, R takes time to distribute tasks across the processors; conversely, it will need time for binding them all together later on. Therefore, if the time for distributing and gathering pieces together is greater than the time need for single-thread computing, it doesn’t worth parallelize.</p>

<p>In this post I’ll perform the same experiment using the same physical resources, except that I will perform it in the Rstudio instead of Emacs. So I want to check whether the packages improved anything significant so far.</p>

<p>I tested a nontrivial computation instance using four critical R functions: the base <strong>lapply</strong>, <strong>mclapply</strong> from the “multicore” package, <strong>parLapply</strong> from the “snow” package, and <strong>sfLapply</strong> from the “snowfall” package. The last three functions essentially provide parallelized equivalent for the lapply.</p>

<h4 id="the-experiment">The Experiment</h4>
<p>These packages were used for distributing tasks across four CPUs of my MacBook pro with 8-G memory. The duty was to average out each column of a data frame built on the fly, but repeating this procedure 100 times for each trial because I don’t want to rely on one single round estimate. In addition, each trial demands different amount of memory allocation and time for computing once the matrix size varies as 1K, 10K, 100K, 1M, and 10M rows. The program I used to perform the tests is left <a href="https://gist.github.com/danielmarcelino/5668701">here</a>.</p>

<p>Overall, every function is doing a better job now than one year ago, but the <strong>mclapply</strong> from the “multicore” package rocks! <strong>parLapply</strong> from the “snow” package comes second. In my former experiment, the lapply function was the way to go when dealing with matrix just as big as 10k rows. The second best alternative was then <strong>mclapply</strong>. <strong>parLapply</strong> from “snow”, and <strong>sfLapply</strong> from the “snowfall” package were simply too slow.</p>

<p>Now, comparing the older graph with the following one suggests that a “microrevolution” is taking place; the figures changed a big deal upon parallelizing small data vectors &lt; 10k; distributing across CPUs seems to be less time consuming now than let it go serialized. Single-core computing (lapply function) is still an alternative when datasets are very small 1k to 10k. Nonetheless, if your data is greater than 10k rows, lapply will be your last desirable performance function.</p>

<p><img src="http://danielmarcelino.github.io/img/2014/parallelfinal.png" alt="Linear Relationship" /></p>

        
          <div id="disqus_thread"></div><!-- /#disqus_thread -->
          
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = '@disqus_BWaSwvKMKm'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://danielmarcelino.github.io/blog/2014/Do-you-believe-in-World-Cup-superstition.html" class="btn" title="Do you believe in World Cup superstition?">Previous</a>
      
      
        <a href="http://danielmarcelino.github.io/blog/2014/discontinuity-bayesian-forecasting.html" class="btn" title="Discontinuity Bayesian Forecasting">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2016 Daniel Marcelino</span>
<div class="social-icons">
	<a href="https://twitter.com/dmarcelinobr" title="Daniel Marcelino on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	<a href="https://facebook.com/1529566150689415" title="Daniel Marcelino on Facebook" target="_blank"><i class="fa fa-facebook-square fa-2x"></i></a>
	
	<a href="https://linkedin.com/in/daniel-marcelino-80968656" title="Daniel Marcelino on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	<a href="users/792000/daniel" title="Daniel Marcelino on StackExchange" target="_blank"><i class="fa fa-stack-exchange fa-2x"></i></a>
	
	
	<a href="https://github.com/danielmarcelino" title="Daniel Marcelino on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="http://danielmarcelino.github.io/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://danielmarcelino.github.io';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://danielmarcelino.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://danielmarcelino.github.io/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 'https://www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-24186657-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = 'https://stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24186657-1', 'auto');
  ga('send', 'pageview');

</script>


<!-- htmlwidgets dependencies --> 
<script src="/htmlwidgets_deps/htmlwidgets-0.5/htmlwidgets.js"></script>
<script src="/htmlwidgets_deps/d3-3.5.3/d3.min.js"></script>
<link href="/htmlwidgets_deps/colorbrewer-1/colorbrewer.css" rel="stylesheet" />
<script src="/htmlwidgets_deps/colorbrewer-1/colorbrewer.js"></script>
<link href="/htmlwidgets_deps/streamgraph-1/streamgraph.css" rel="stylesheet" />
<script src="/htmlwidgets_deps/streamgraph-binding-0.8.1/streamgraph.js"></script>


</body>
</html>
