<!DOCTYPE html>
<html lang="en">

 
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="keywords" content="Daniel Marcelino, SciencesPo, SoundexBR, r-project, r, political science, political behavior, social sciences, statistics, methods, applied methods, programming, data mining, data visualization, datascience, big data"/>	
	<meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ" />
	<meta name="bing_webmastertools_id" content="97837256955BD270FD688E2B50F89FDB" />
    <meta name="author" content="Daniel Marcelino" />
	 <meta name="title" content="&middot; Daniel &middot; Parallel computing in R" />
	 
	   <!-- favicon -->
	<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
  
	

  
 <title>EnfoRced Data Analysis</title>
   

  
  
  
  <link rel="alternate" type="application/rss+xml" title="EnfoRced Data Analysis - Blog of Daniel Marcelino" href="/feed.xml" />

  
    
      <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
    
    
  
  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
  
  
  
    
	  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
	  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

    
  
  
  
  
  
  <!-- Facebook OpenGraph tags -->
  
  <meta property="og:title" content="Parallel computing in R" />
  
  
  <meta property="og:type" content="website" />
  
  
  <meta property="og:url" content="http://danielmarcelino.github.io/blog/2014/Parallel-computing-in-R.html/" />
  
  
  
  <meta property="og:image" content="http://danielmarcelino.github.io/images/daniel_rio.jpg" />
  

</head>


  <body>
	 
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://danielmarcelino.github.io">EnfoRced Data Analysis</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
	    
        <li>
		  <a href="/blog">Blog</a>
		</li>
		
        <li>
		  <a href="/interests">Interests</a>
		</li>
		
        <li>
		  <a href="/randomwalks">Random Walks</a>
		</li>
		
        <li>
		  <a href="/about">About</a>
		</li>
		
		
		
		<li>
		  <a href="/search" class="nav-search-link" title="Search">
		    <span class="fa fa-search nav-search-icon"></span>
			<span class="nav-search-text">Search</span>
		  </a>
		</li>
		
      </ul>
    </div>
	
	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="http://danielmarcelino.github.io ">
	      <img class="avatar-img" src="/images/daniel_rio.jpg" />
		</a>
	  </div>
	</div>
	
	
  </div>
</nav>  

    



<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Parallel computing in R</h1>
		  
		  
		  
		  <span class="post-meta">Posted on July 1, 2014</span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
	    <p>Parallel computing is incredibly useful, but not every thing worths distribute across as many cores as possible.</p>

<p>Roughly a year ago I published an article about parallel computing in R <a href="http://danielmarcelino.com/r/05-2013/parallel-processing-when-does-it-worth/">here</a>, in which I compared computation performance among 4 packages that provide R with parallel features once R is essentially a single-thread task package.</p>

<p><img src="http://danielmarcelino.github.io/images/2014/parallel.png" alt="Experiment Result" /></p>

<p>Parallel computing is incredibly useful, but not every thing worths distribute across as many cores as possible. Actually, there are cases without enough repetitions that R will gain in performance through serial computation. That is, R takes time to distribute tasks across the processors; conversely, it will need time for binding them all together later on. Therefore, if the time for distributing and gathering pieces together is greater than the time need for single-thread computing, it doesn’t worth parallelize.</p>

<p>In this post I’ll perform the same experiment using the same physical resources, except that I will perform it in the Rstudio instead of Emacs. So I want to check whether the packages improved anything significant so far.</p>

<p>I tested a nontrivial computation instance using four critical R functions: the base <strong>lapply</strong>, <strong>mclapply</strong> from the “multicore” package, <strong>parLapply</strong> from the “snow” package, and <strong>sfLapply</strong> from the “snowfall” package. The last three functions essentially provide parallelized equivalent for the lapply.</p>

<h4 id="the-experiment">The Experiment</h4>
<p>These packages were used for distributing tasks across four CPUs of my MacBook pro with 8-G memory. The duty was to average out each column of a data frame built on the fly, but repeating this procedure 100 times for each trial because I don’t want to rely on one single round estimate. In addition, each trial demands different amount of memory allocation and time for computing once the matrix size varies as 1K, 10K, 100K, 1M, and 10M rows. The program I used to perform the tests is left <a href="https://gist.github.com/danielmarcelino/5668701">here</a>.</p>

<p>Overall, every function is doing a better job now than one year ago, but the <strong>mclapply</strong> from the “multicore” package rocks! <strong>parLapply</strong> from the “snow” package comes second. In my former experiment, the lapply function was the way to go when dealing with matrix just as big as 10k rows. The second best alternative was then <strong>mclapply</strong>. <strong>parLapply</strong> from “snow”, and <strong>sfLapply</strong> from the “snowfall” package were simply too slow.</p>

<p>Now, comparing the older graph with the following one suggests that a “microrevolution” is taking place; the figures changed a big deal upon parallelizing small data vectors &lt; 10k; distributing across CPUs seems to be less time consuming now than let it go serialized. Single-core computing (lapply function) is still an alternative when datasets are very small 1k to 10k. Nonetheless, if your data is greater than 10k rows, lapply will be your last desirable performance function.</p>

<p><img src="http://danielmarcelino.github.io/images/2014/parallelfinal.png" alt="Linear Relationship" /></p>

	  </article>
	  
	  
	  <div class="blog-tags">
		Tags: R
	  </div>
	  
	  
      <ul class="pager blog-pager">
        
        <li class="previous">
          <a href="/blog/2014/Do-you-believe-in-World-Cup-superstition%3F.html" data-toggle="tooltip" data-placement="top" title="Do you believe in World Cup superstition?">&larr; Previous Post</a>
        </li>
        
        
        <li class="next">
          <a href="/blog/2014/discontinuity-bayesian-forecasting.html" data-toggle="tooltip" data-placement="top" title="Discontinuity Bayesian Forecasting">Next Post &rarr;</a>
        </li>
        
      </ul>

      
        <div class="share-section">
  <h1 class="share-title">Liked what you read?'</h1>
  <div class="share-buttons">
    
    
    
    

    
    
      
    
    
    
    <a href="http://danielmarcelino.github.io/contact" data-ga-event=1 data-ga-category="share" data-ga-action="message" data-ga-label="/blog/2014/Parallel-computing-in-R.html">
      Let me know
    </a>
    <a href="https://www.facebook.com/dialog/feed?app_id=1529566150689415&link=http://danielmarcelino.github.io/blog/2014/Parallel-computing-in-R.html&name=Parallel computing in R&caption=&redirect_uri=http://danielmarcelino.github.io/blog/2014/Parallel-computing-in-R.html?message=Thanks for sharing!" data-ga-event=1 data-ga-category="share" data-ga-action="facebook" data-ga-label="/blog/2014/Parallel-computing-in-R.html">
      Share on Facebook
    </a>
    <a href="https://twitter.com/intent/tweet?url=http://danielmarcelino.github.io/blog/2014/Parallel-computing-in-R.html&via=daniel&text=Parallel computing in R" data-ga-event=1 data-ga-category="share" data-ga-action="twitter" data-ga-label="/blog/2014/Parallel-computing-in-R.html">
      Tweet it
    </a>
  </div>
</div>

      

	  
      <div class="disqus-comments">
	    
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'daniel-marcelino';
	    // ensure that pages with query string get the same discussion
            var url_parts = window.location.href.split("?");
            var disqus_url = url_parts[0];

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


      </div>
	  
    </div>
  </div>
</div>


    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">

          
          <li>
            <a href="mailto:dmarcelino@live.com?subject=Hello from " title="Email me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/danielmarcelino/" title="GitHub">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/dmarcelinobr" title="Twitter">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          

          
          <li>
            <a href="https://stackoverflow.com/users/792000/daniel" title="StackOverflow">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://linkedin.com/daniel-marcelino-80968656" title="LinkedIn">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="/feed.xml" title="Subscribe to my blog">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>		
          

        </ul>

        <p class="copyright text-muted">
          &copy; Daniel Marcelino
          &nbsp;&bull;&nbsp;
          2016
        </p>
      </div>
    </div>
  </div>
</footer>

  
    


  
	<script src="/js/jquery-1.11.2.min.js"></script>
  
	<script src="/js/bootstrap.min.js"></script>
  
	<script src="/js/main.js"></script>
  







	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-24186657-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->

  
  </body>
</html>
