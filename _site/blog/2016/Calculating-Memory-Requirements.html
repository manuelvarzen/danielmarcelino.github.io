<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Calculating Memory Requirements &#8211; Data * Analysis + R</title>
<meta name="description" content="A post about size and memory requirements that a computer must have to deal with a data frame.">
<meta name="keywords" content="R, rstats">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Calculating Memory Requirements">
<meta name="twitter:description" content="A post about size and memory requirements that a computer must have to deal with a data frame.">
<meta name="twitter:site" content="@dmarcelinobr">


<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://danielmarcelino.github.io/images/img/daniel_rio.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Calculating Memory Requirements">
<meta property="og:description" content="A post about size and memory requirements that a computer must have to deal with a data frame.">
<meta property="og:url" content="http://danielmarcelino.github.io/blog/2016/Calculating-Memory-Requirements.html">
<meta property="og:site_name" content="Data * Analysis + R">





<link rel="canonical" href="http://danielmarcelino.github.io/blog/2016/Calculating-Memory-Requirements.html">
<link href="http://danielmarcelino.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Data * Analysis + R Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://danielmarcelino.github.io/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://danielmarcelino.github.io/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://danielmarcelino.github.io/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://danielmarcelino.github.io/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://danielmarcelino.github.io/favicon.ico?r=31241">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://danielmarcelino.github.io/favicon.png?r=31241">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://danielmarcelino.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://danielmarcelino.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://danielmarcelino.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://danielmarcelino.github.io/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="http://danielmarcelino.github.io/home/" >Home</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/blog/" >Blog</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/interests/" >Interests</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/about/" >About</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/randomwalks/" >Random Walks</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/blogroll/" >Resources</a></li>
		  
		    
		    <li><a href="http://danielmarcelino.github.io/search/" >Search</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="http://danielmarcelino.github.io/" class="site-logo" rel="home" title="Data * Analysis + R"><img src="http://danielmarcelino.github.io/images/img/daniel_rio.jpg" width="200" height="200" alt="Data * Analysis + R logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="http://danielmarcelino.github.io/">Data * Analysis + R</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">Blog of Daniel Marcelino</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://danielmarcelino.github.io/tags/#R" title="Pages tagged R">R</a>&nbsp;&bull;&nbsp;<a href="http://danielmarcelino.github.io/tags/#rstats" title="Pages tagged rstats">rstats</a></span>
        
          <h1 class="entry-title">Calculating Memory Requirements</h1>
        
      </header>
      <footer class="entry-meta">
        
        
        <span class="author vcard">By <span class="fn"></span></span>
        <span class="entry-date date published"><time datetime="2016-07-20T00:00:00-03:00"><i class="fa fa-calendar-o"></i> July 20, 2016</time></span>
        
        <span class="entry-comments"><i class="fa fa-comment-o"></i> <a href="#disqus_thread">Comment</a></span>
        <span class="social-share-twitter">
  <a href="https://twitter.com/intent/tweet?hashtags=R,rstats&amp;text=Calculating%20Memory%20Requirements&amp;url=http://danielmarcelino.github.io/blog/2016/Calculating-Memory-Requirements.html" title="Share on Twitter" itemprop="Twitter"><i class="fa fa-twitter-square"></i> Tweet</a>
</span>
<span class="social-share-facebook">
  <a href="https://www.facebook.com/sharer/sharer.php?u=http://danielmarcelino.github.io/blog/2016/Calculating-Memory-Requirements.html" title="Share on Facebook" itemprop="Facebook"><i class="fa fa-facebook-square"></i> Like</a>
</span>
<span class="social-share-googleplus">
  <a href="https://plus.google.com/share?url=http://danielmarcelino.github.io/blog/2016/Calculating-Memory-Requirements.html" title="Share on Google Plus" itemprop="GooglePlus"><i class="fa fa-google-plus-square"></i> +1</a>
</span>
<!-- /.social-share -->
        
      </footer>
      <div class="entry-content">
        <p>I had a conversation with people at the office about size and memory requirements that a computer must have to deal with a data frame. It started like this: suppose you have a data frame with 2,000,000 rows and 250 columns, all of which are numeric data  (2,000,000 × 250 × 8 bytes/numeric). Roughly saying, how much memory is required to store this data?</p>

<p>We can calculate the proximate memory usage using number of rows and columns within the data:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># bytes
</span><span class="o">&gt;</span><span class="w"> </span><span class="m">2000000</span><span class="o">*</span><span class="m">250</span><span class="o">*</span><span class="m">8</span><span class="w"> 
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">4000000000</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="c1"># bytes/MB
</span><span class="o">&gt;</span><span class="w"> </span><span class="m">2000000</span><span class="o">*</span><span class="m">250</span><span class="o">*</span><span class="m">8</span><span class="o">/</span><span class="m">2</span><span class="o">^</span><span class="p">{</span><span class="m">20</span><span class="p">}</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3814.697</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="c1"># MB
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="m">2000000</span><span class="o">*</span><span class="m">250</span><span class="o">*</span><span class="m">8</span><span class="o">/</span><span class="m">2</span><span class="o">^</span><span class="p">{</span><span class="m">20</span><span class="p">},</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3814.7</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="c1"># GB
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="m">2000000</span><span class="o">*</span><span class="m">250</span><span class="o">*</span><span class="m">8</span><span class="o">/</span><span class="m">2</span><span class="o">^</span><span class="p">{</span><span class="m">20</span><span class="p">}</span><span class="o">/</span><span class="m">1024</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3.73</span></code></pre></figure>

<p>We also can apply the same approach on other types of data with attention to number of bytes used to store different data types, as character, factors etc. We also can use 10 rather than 8 as the bytes/numeric coefficient, and triple that to figure out how much contiguous space is needed. If the data frame is just character data, the ratio is going to be around 1.1, and reading it in as factor data might be even below this.</p>

<p>Finally, if you want to get a solid understanding of R’s memory management, you will find a section in the Hadley Wickham’s <a href="http://adv-r.had.co.nz/memory.html">book</a> very useful.</p>

        
          <div id="disqus_thread"></div><!-- /#disqus_thread -->
          
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = '@disqus_BWaSwvKMKm'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://danielmarcelino.github.io/blog/2016/reproducible-research.html" class="btn" title="What is reproducible research?">Previous</a>
      
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2016 Daniel Marcelino</span>
<div class="social-icons">
	<a href="https://twitter.com/dmarcelinobr" title="Daniel Marcelino on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	<a href="https://facebook.com/1529566150689415" title="Daniel Marcelino on Facebook" target="_blank"><i class="fa fa-facebook-square fa-2x"></i></a>
	
	<a href="https://linkedin.com/in/daniel-marcelino-80968656" title="Daniel Marcelino on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	<a href="users/792000/daniel" title="Daniel Marcelino on StackExchange" target="_blank"><i class="fa fa-stack-exchange fa-2x"></i></a>
	
	
	<a href="https://github.com/danielmarcelino" title="Daniel Marcelino on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="http://danielmarcelino.github.io/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://danielmarcelino.github.io';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://danielmarcelino.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://danielmarcelino.github.io/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 'https://www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-24186657-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = 'https://stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24186657-1', 'auto');
  ga('send', 'pageview');

</script>


<!-- htmlwidgets dependencies --> 
<script src="/htmlwidgets_deps/htmlwidgets-0.5/htmlwidgets.js"></script>
<script src="/htmlwidgets_deps/d3-3.5.3/d3.min.js"></script>
<link href="/htmlwidgets_deps/colorbrewer-1/colorbrewer.css" rel="stylesheet" />
<script src="/htmlwidgets_deps/colorbrewer-1/colorbrewer.js"></script>
<link href="/htmlwidgets_deps/streamgraph-1/streamgraph.css" rel="stylesheet" />
<script src="/htmlwidgets_deps/streamgraph-binding-0.8.1/streamgraph.js"></script>


</body>
</html>
